

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>JSONAlchemy &mdash; Invenio 2.2.0.dev20150608 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="Invenio 2.2.0.dev20150608 documentation" href="../index.html"/>
        <link rel="up" title="API" href="../api.html"/>
        <link rel="next" title="Knowledge" href="knowledge.html"/>
        <link rel="prev" title="Formatter" href="formatter.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> Invenio
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/introduction.html">Introduction to Invenio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/introduction.html#what-is-a-registry">What is a Registry?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/introduction.html#what-do-i-need">What do I need?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/introduction.html#get-started">Get Started</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/quickstart.html">Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/demo.html">Demo and Example Sites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/demo.html#demo-sites">Demo Sites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/demo.html#production-sites">Production Sites</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/features.html">Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/features.html#navigable-collection-tree">Navigable collection tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/features.html#powerful-search-engine">Powerful search engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/features.html#flexible-metadata">Flexible metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/features.html#user-personalization">User personalization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/features.html#multiple-output-formats">Multiple output formats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/first-steps.html">First Steps with Invenio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/first-steps.html#about">1. About</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/first-steps.html#prerequisites">2. Prerequisites</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/first-steps.html#debian-ubuntu-lts">2.1. Debian / Ubuntu LTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/first-steps.html#centos-rhel">2.2. Centos / RHEL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/first-steps.html#os-x">2.3. OS X</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/first-steps.html#extra-tools">2.4. Extra tools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/first-steps.html#quick-instructions-for-the-impatient-invenio-developer">3. Quick instructions for the impatient Invenio developer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/first-steps.html#installation">3.1. Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/first-steps.html#configuration">3.2. Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/first-steps.html#development">3.3. Development</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/first-steps.html#final-words">4. Final words</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/overlay.html">How to create an Invenio overlay</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overlay.html#what-is-an-overlay">What is an overlay</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overlay.html#creating-your-first-invenio-overlay">Creating your first Invenio overlay</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#the-global-setup">The global setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#the-virtual-environment">The virtual environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#the-base-of-the-overlay">The base of the overlay</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overlay.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#sensitive-configuration">Sensitive configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#database-setup">Database setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#assets">Assets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overlay.html#running">Running</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overlay.html#translations">Translations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#id1">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#message-extraction">Message Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#create-catalog-for-new-language">Create Catalog for New Language</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#compiling-catalog">Compiling Catalog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#updating-strings">Updating Strings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overlay.html#deployment">Deployment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#preparing-the-tarball">Preparing the tarball</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#creating-the-virtual-environement">Creating the virtual environement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#installing-the-package">Installing the package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#id2">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#running-the-server">Running the server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#dealing-with-versions">Dealing with versions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/common-concepts.html">Common Concepts</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developers/index.html">Developer&#8217;s Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../developers/introduction.html">Introducing Invenio for Developers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developers/introduction.html#extensions">Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/introduction.html#modules">Modules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developers/extensions.html">Extensions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developers/extensions.html#plugging-an-existing-extension">Plugging an Existing Extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/extensions.html#code-structure">Code structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developers/registries.html">Pluggable Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developers/models.html">Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developers/models.html#code-structure">Code structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/models.html#quering">Quering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/models.html#subqueries">Subqueries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/models.html#schema">Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/models.html#improve-code-readability">Improve code readability</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developers/modules.html">Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developers/modules.html#views">Views</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developers/howtomodule.html">How to develop a module: Part 1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developers/howtomodule.html#overview">Overview</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developers/howtomodulepart2.html">How to develop a module: Part 2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developers/howtomodulepart2.html#multiple-views">Multiple views</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/howtomodulepart2.html#module-wide-configuration">Module-wide configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developers/howtomodulepart3.html">How to develop a module: Part 3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developers/howtomodulepart3.html#tests">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/howtomodulepart3.html#documentation">Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developers/templates.html">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developers/tutorial.html">Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developers/git-workflow.html">Git Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developers/git-workflow.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/git-workflow.html#setting-things-up">Setting things up</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#s1-setting-up-your-git-identity">S1. Setting up your Git identity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#s2-setting-up-your-private-repo">S2. Setting up your private repo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#s3-backuping-your-private-repo-only-developers-at-cern">S3. Backuping your private repo (only developers at CERN)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#s4-setting-up-your-public-repo">S4. Setting up your public repo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#s5-pushing-to-your-public-repo-from-outside-cern">S5. Pushing to your public repo from outside CERN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#s6-making-your-public-repo-visible-on-the-web">S6. Making your public repo visible on the Web</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#s7-using-remote-repository-locally">S7. Using remote repository locally</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developers/git-workflow.html#understanding-official-repo-branches">Understanding official repo branches</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#maint"><code class="docutils literal"><span class="pre">maint</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#master"><code class="docutils literal"><span class="pre">master</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#next"><code class="docutils literal"><span class="pre">next</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developers/git-workflow.html#working-on-new-features-overview">Working on new features - overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/git-workflow.html#working-on-new-features-details">Working on new features - details</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#w1-cloning-the-repo">W1. Cloning the repo</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#w2-working-with-local-topic-branches">W2. Working with local topic branches</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#w3-working-on-new-feature-b">W3. Working on new-feature-b</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#w4-using-temporary-stash">W4. Using temporary stash</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#w5-testing-on-dev-servers">W5. Testing on DEV servers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#w6-rebasing-against-latest-git-master">W6. Rebasing against latest git/master</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#w7-publishing-your-work">W7. Publishing your work</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#w8-review-process">W8. Review process</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developers/git-workflow.html#remarks-often-made-during-code-review">Remarks often made during code review</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#r1-remarks-on-commit-history">R1. Remarks on commit history</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#r2-remarks-on-commit-log-messages">R2. Remarks on commit log messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#r3-remarks-on-the-coding">R3. Remarks on the coding</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developers/git-workflow.html#r4-notes-on-the-review-process-timeline">R4. Notes on the review process timeline</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developers/kwalitee.html">Commit quality check</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developers/patterns.html">Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developers/docker.html">Docker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developers/docker.html#setup">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/docker.html#interactive-sessions">Interactive sessions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/docker.html#debugging">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/docker.html#code-changes-and-live-reloading">Code changes and live reloading</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/docker.html#building-documentation">Building documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/docker.html#running-tests">Running tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/docker.html#overlays">Overlays</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Admin&#8217;s Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibauthority-admin-guide.html">BibAuthority Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibauthority-admin-guide.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibauthority-admin-guide.html#enforcing-types-of-authority-records">Enforcing types of authority records</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibauthority-admin-guide.html#bibedit">BibEdit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibauthority-admin-guide.html#bibindex">BibIndex</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibauthority-admin-guide.html#configuration-file-overview">Configuration File Overview</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibclassify-admin-guide.html">BibClassify Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibclassify-admin-guide.html#overview">1. Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibclassify-admin-guide.html#thesaurus">1.1 Thesaurus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibclassify-admin-guide.html#keyword-extraction">1.2 Keyword extraction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibclassify-admin-guide.html#running-bibclassify">2. Running BibClassify</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibconvert-admin-guide.html">BibConvert Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#a-overview">A. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#b-xml-oriented-mode">B. XML-Oriented Mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#configuration-file-examples">1. Configuration File Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#running-bibconvert">2. Running BibConvert</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#c-plain-text-oriented-mode">C. Plain Text-Oriented Mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#id2">1. Configuration File Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#id3">2. Running BibConvert</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#bibconvert-configuration-guide">3. BibConvert Configuration Guide</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibedit-admin-guide.html">BibEdit Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibedit-admin-guide.html#overview">1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibedit-admin-guide.html#edit-records-via-web-interface">2. Edit records via Web interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibedit-admin-guide.html#keyboard-shortcuts-on-bibedit">2.1 Keyboard shortcuts on BibEdit</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibedit-admin-guide.html#edit-multiple-records-via-web-interface">3. Edit multiple records via web interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibedit-admin-guide.html#multi-record-editor-user-guide">3.1 Multi-Record Editor user guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibedit-admin-guide.html#edit-records-via-command-line">4. Edit records via command line</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibedit-admin-guide.html#delete-records-via-command-line">5. Delete records via command line</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibedit-admin-guide.html#delete-all-records">6. Delete all records</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibedit-admin-guide.html#access-record-history">7. Access record history</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html">BibKnowledge Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#contents">Contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#overview">1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#configure-knowledge-bases">2. Configure Knowledge Bases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#add-a-knowledge-base">2.1 Add a Knowledge Base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#remove-a-knowledge-base">2.2 Remove a Knowledge Base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#add-a-mapping">2.3 Add a Mapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#remove-a-mapping">2.4 Remove a Mapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#edit-a-mapping">2.5 Edit a Mapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#edit-the-attributes-of-a-knowledge-base">2.6 Edit the Attributes of a Knowledge Base</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibmatch-admin-guide.html">BibMatch Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#overview">1. Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#what-is-bibmatch">1.1 What is BibMatch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#features">1.2 Features</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#usage">2. Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#basic-usage">2.1 Basic usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#advanced-usage">2.2 Advanced usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#more-examples">3. More examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#id2">3.1 More examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#appendix">Appendix</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#a-querystrings">A. Querystrings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#b-bibconvert-formats">B. BibConvert formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#c-predefined-fields">C. Predefined fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#d-bibmatch-commmand-line-tool">D. BibMatch commmand-line tool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibsched-admin-guide.html">BibSched Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#bibsched-graphical-interface">Bibsched graphical interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibsched-admin-guide.html#manual-mode">Manual mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibsched-admin-guide.html#automatic-mode">Automatic mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#bibsched-maintenance">Bibsched maintenance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#priorities">Priorities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#task-logging">Task logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#task-concurrency">Task concurrency</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#bibsched-command-line-interface">Bibsched command line interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#bibtasks-command-line-interface">Bibtasks command line interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#bibsched-tasklets">BibSched Tasklets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibupload-admin-guide.html">BibUpload Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibupload-admin-guide.html#overview">1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibupload-admin-guide.html#configuring-bibupload">2. Configuring BibUpload</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibupload-admin-guide.html#running-bibupload">3. Running BibUpload</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#inserting-new-records">3.1 Inserting new records</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#inserting-records-into-the-holding-pen">3.2 Inserting records into the Holding Pen</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#updating-existing-records">3.3 Updating existing records</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#inserting-and-updating-at-the-same-time">3.4 Inserting and updating at the same time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#obtaining-feedbacks">3.7 Obtaining feedbacks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#assigning-additional-information-to-documents-and-other-entities">3.8 Assigning additional information to documents and other entities</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibupload-admin-guide.html#batch-uploader">4. Batch Uploader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#web-interface-cataloguers">4.1 Web interface - Cataloguers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#web-interface-robots">4.2 Web interface - Robots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#daemon-mode">4.2 Daemon mode</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/docextract-admin-guide.html">DocExtract Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/oaiharvest-admin-guide.html">OAIHarvest Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/oaiharvest-admin-guide.html#overview">1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/oaiharvest-admin-guide.html#oai-data-harvesting">2. OAI Data Harvesting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/oaiharvest-admin-guide.html#oai-harvest-admin-interface">2.1 OAI Harvest Admin Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/oaiharvest-admin-guide.html#oaiharvest-commmand-line-tool">2.2 oaiharvest commmand-line tool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/oairepository-admin-guide.html">OAIRepository Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/oairepository-admin-guide.html#overview">1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/oairepository-admin-guide.html#oai-repository-exporting">2. OAI Repository (<em>Exporting</em>)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/oairepository-admin-guide.html#definition-of-oai-sets">2.1. Definition of OAI sets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/oairepository-admin-guide.html#exposing-metadata-via-oai-repository-gateway">2.2. Exposing metadata via OAI Repository Gateway</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/publiline-admin-guide.html">Publiline Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/publiline-admin-guide.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/publiline-admin-guide.html#configure-publiline">Configure Publiline</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/publiline-admin-guide.html#step-1-define-a-publication-committee-chair">Step 1 : Define a Publication Committee Chair</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/publiline-admin-guide.html#step-2-create-a-group">Step 2 : Create a Group</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/publiline-admin-guide.html#step-3-define-project-leader-s">Step 3 : Define Project Leader(s)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/publiline-admin-guide.html#overview-and-usage">Overview and usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/webmessage-admin-guide.html">WebMessage Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/websession-admin-guide.html">WebSession Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/websession-admin-guide.html#guest-user-sessions">Guest User Sessions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/webstyle-admin-guide.html">WebStyle Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/webstyle-admin-guide.html#contents">Contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/webstyle-admin-guide.html#overview">1. Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#css-style-sheet-and-images">1.1 CSS Style Sheet and Images</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#html-page-layout">1.2 HTML Page Layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#look-of-bibliographic-references">1.3 Look of Bibliographic References</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#specific-configurations">1.4 Specific Configurations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/webstyle-admin-guide.html#detailed-record-pages">2. Detailed Record Pages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#available-tabs">2.1 Available tabs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#showing-hiding-tabs">2.2 Showing/Hiding tabs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#customizing-content-of-tabs">2.3 Customizing content of tabs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#customizing-look-of-tabs">2.4 Customizing look of tabs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#custom-redirections">Custom Redirections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#command-line-interface">Command Line Interface</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../base.html">Base</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../base.html#invenio-base">invenio.base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../base.html#module-invenio.base.wrappers">Wrappers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../base.html#module-invenio.base.factory">Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../base.html#module-invenio.base.bundles">Bundles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#extensions">Extensions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ext/assets.html">Assets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/assets.html#module-invenio.ext.assets.commands">Flask-Script commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/assets.html#module-invenio.ext.assets.extensions">Jinja2 extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/assets.html#module-invenio.ext.assets.registry">Registry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/assets.html#module-invenio.ext.assets.wrappers">Wrappers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/arxiv.html">ArXiv</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/arxiv.html#configuration-settings">Configuration Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/crossref.html">CrossRef</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/crossref.html#configuration-settings">Configuration Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/es.html">Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ext/fs.html">Cloud Filesystems</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/fs.html#dropbox">Dropbox</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/fs.html#google-drive">Google Drive</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/jasmine.html">Jasmine</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/jasmine.html#missing-features">Missing features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/jasmine.html#flightjs-tests">FlightJS tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/jasmine.html#fixtures">Fixtures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/jasmine.html#howto">HOWTO</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/logging.html">Logging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/logging.html#logging-errors">Logging errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/logging.html#log-handlers">Log handlers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/logging.html#legacy-handling-of-errors">Legacy handling of errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/logging.html#error-handling-do-s-and-don-ts">Error handling do&#8217;s and don&#8217;ts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/logging.html#backends">Backends</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/login.html">Login</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/login.html#module-invenio.ext.login">invenio.ext.login package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/login.html#module-invenio.ext.login.legacy_user">invenio.ext.login.legacy_user module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/passlib.html">Passlib</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/passlib.html#configuration-settings">Configuration Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/script.html">Script</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/script.html#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/session.html">Session</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/session.html#module-invenio.ext.session.backends">Backends</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/session.html#module-invenio.ext.session.interface">Wrappers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/sqlalchemy.html">SQLAlchemy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ext/template.html">Templates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/template.html#module-invenio.ext.template.extensions">Jinja2 extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/template.html#module-invenio.ext.template.config">Config</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/template.html#module-invenio.ext.template.loader">Loader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/template.html#module-invenio.ext.template.bccache">BCCache</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/template.html#module-invenio.ext.template.context_processor">Context Processor</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../api.html#modules">Modules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="annotations.html">Annotations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="annotations.html#invenio-modules-annotations">invenio.modules.annotations</a></li>
<li class="toctree-l4"><a class="reference internal" href="annotations.html#module-invenio.modules.annotations.models">Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="annotations.html#module-invenio.modules.annotations.noteutils">Noteutils</a></li>
<li class="toctree-l4"><a class="reference internal" href="annotations.html#module-invenio.modules.annotations.views">Views</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="apikeys.html">API Keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="documentation.html">Documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="documentation.html#module-invenio.modules.documentation.config">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="documentation.html#module-invenio.modules.documentation.views">Views</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="documents.html">Documents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="documents.html#invenio-modules-documents-api">invenio.modules.documents.api</a></li>
<li class="toctree-l4"><a class="reference internal" href="documents.html#invenio-modules-documents-errors">invenio.modules.documents.errors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="formatter.html">Formatter</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">JSONAlchemy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-structure">Module Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-it-works">How it Works</a></li>
<li class="toctree-l4"><a class="reference internal" href="#how-to-extend-jsonalchemy-behaviour">How to Extend JSONAlchemy Behaviour</a></li>
<li class="toctree-l4"><a class="reference internal" href="#invenio-use-cases">Invenio Use Cases</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-documentation">API Documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="knowledge.html">Knowledge</a><ul>
<li class="toctree-l4"><a class="reference internal" href="knowledge.html#module-invenio.modules.knowledge.models">Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="knowledge.html#module-invenio.modules.knowledge.api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="oauthclient.html">OAuthClient</a><ul>
<li class="toctree-l4"><a class="reference internal" href="oauthclient.html#authorization-flow-overview">Authorization Flow Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="oauthclient.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="oauthclient.html#module-invenio.modules.oauthclient.config">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="oauthclient.html#contrib">Contrib</a></li>
<li class="toctree-l4"><a class="reference internal" href="oauthclient.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="redirector.html">Redirector</a><ul>
<li class="toctree-l4"><a class="reference internal" href="redirector.html#module-invenio.modules.redirector.models">Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="redirector.html#module-invenio.modules.redirector.api">API</a></li>
<li class="toctree-l4"><a class="reference internal" href="redirector.html#module-invenio.modules.redirector.manage">Manage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="upgrader.html">Upgrader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="upgrader.html#recommendations-for-writing-upgrades">Recommendations for writing upgrades</a></li>
<li class="toctree-l4"><a class="reference internal" href="upgrader.html#upgrade-modules">Upgrade modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="upgrader.html#upgrade-dependency-graph">Upgrade dependency graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="upgrader.html#module-invenio.modules.upgrader.models">Models</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="uploader.html">Uploader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="uploader.html#module-invenio.modules.uploader.tasks">Tasks</a></li>
<li class="toctree-l4"><a class="reference internal" href="uploader.html#module-invenio.modules.uploader.workflows">Workflows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="workflows.html">Workflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="workflows.html#create-a-workflow">Create a workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="workflows.html#create-a-task">Create a task</a></li>
<li class="toctree-l4"><a class="reference internal" href="workflows.html#run-a-workflow">Run a workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="workflows.html#holding-pen">Holding Pen</a></li>
<li class="toctree-l4"><a class="reference internal" href="workflows.html#api">API</a></li>
<li class="toctree-l4"><a class="reference internal" href="workflows.html#models">Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="workflows.html#engine">Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="workflows.html#id2">Workers</a></li>
<li class="toctree-l4"><a class="reference internal" href="workflows.html#views">Views</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#utilities">Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../utils/datastructures.html">Datastructures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/washers.html">Washers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/forms.html">Forms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#legacy">Legacy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../legacy/bibrecord.html">BibRecord</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Community</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../community/code-of-conduct.html">Code of Conduct</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deprecationpolicy.html">Deprecation policy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../deprecationpolicy.html#fast-track-deprecation">Fast track deprecation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deprecationpolicy.html#how-to-deprecate-a-feature">How to deprecate a feature</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../upgrading.html">Upgrading</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../upgrading.html#recommendations-for-writing-upgrades">Recommendations for writing upgrades</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrading.html#upgrade-modules">Upgrade modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrading.html#upgrade-dependency-graph">Upgrade dependency graph</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../license.html#authors">Authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../license.html#invenio-license">Invenio License</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Invenio</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../api.html">API</a> &raquo;</li>
      
    <li>JSONAlchemy</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="jsonalchemy">
<span id="id1"></span><h1>JSONAlchemy<a class="headerlink" href="#jsonalchemy" title="Permalink to this headline">¶</a></h1>
<p>JSONAlchemy provides an abstraction layer on top of your database to work with
JSON objects, helping the administrators to define the data model of their site
independent of the master format they are working with and letting the
developers work in a controlled and uniform data environment.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#module-structure" id="id8">Module Structure</a></li>
<li><a class="reference internal" href="#configuration" id="id9">Configuration</a><ul>
<li><a class="reference internal" href="#field-configuration-files" id="id10">Field Configuration Files</a></li>
<li><a class="reference internal" href="#model-configuration-file" id="id11">Model Configuration File</a></li>
<li><a class="reference internal" href="#readers" id="id12">Readers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-it-works" id="id13">How it Works</a></li>
<li><a class="reference internal" href="#how-to-extend-jsonalchemy-behaviour" id="id14">How to Extend JSONAlchemy Behaviour</a></li>
<li><a class="reference internal" href="#invenio-use-cases" id="id15">Invenio Use Cases</a></li>
<li><a class="reference internal" href="#api-documentation" id="id16">API Documentation</a><ul>
<li><a class="reference internal" href="#core" id="id17">Core</a></li>
<li><a class="reference internal" href="#extensions" id="id18">Extensions</a></li>
</ul>
</li>
</ul>
</div>
<div class="admonition-wip-finish-with-the-empty-sections admonition">
<p class="first admonition-title">WIP, Finish with the empty sections:</p>
<ul class="last simple">
<li>Module Structure: Explain what is each folder for and maybe the
namespaces.</li>
<li>Readers:</li>
<li>How it works: explain how everything works together, how the magic
happens. Maybe a small example (record centric?).</li>
<li>How to Extend JSONAlchemy Behaviour</li>
<li>Invenio Use Cases: pointer to records, annotations and documents
documentation (where real &#8216;how to&#8217; stile documentation is place for each
of them).</li>
</ul>
</div>
<div class="section" id="module-structure">
<h2>Module Structure<a class="headerlink" href="#module-structure" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>JSONAlchemy works with two different configuration files, one for the field
definitions and the second one for the models.</p>
<div class="section" id="field-configuration-files">
<h3>Field Configuration Files<a class="headerlink" href="#field-configuration-files" title="Permalink to this headline">¶</a></h3>
<p>This is an example (it might not be 100% semantically correct) of the
definition of the field &#8216;title&#8217;:</p>
<div class="highlight-python"><div class="highlight"><pre>title:
    schema:
        {&#39;title&#39;: {&#39;type&#39;: &#39;dict&#39;, &#39;required&#39;: False}}
    creator:
        @legacy(((&quot;245&quot;, &quot;245__&quot;,&quot;245__%&quot;), &quot;&quot;),
                (&quot;245__a&quot;, &quot;title&quot;, &quot;title&quot;),
                (&quot;245__b&quot;, &quot;subtitle&quot;),
                (&quot;245__k&quot;, &quot;form&quot;))
        marc, &#39;245..&#39;, {&#39;title&#39;: value[&#39;a&#39;], &#39;subtitle&#39;: value[b]}
        dc, &#39;dc:title&#39;, {&#39;title&#39;: value}
        unimarc, &#39;200[0,1]_&#39;, {&#39;title&#39;: value[&#39;a&#39;], &#39;subtitle&#39;: value[&#39;e&#39;]}
    producer:
        json_for_marc(), {&#39;a&#39;: &#39;title&#39;, &#39;b&#39;: &#39;subtitle&#39;}
        json_for_dc(), {&#39;dc:title&#39;: &#39;&#39;}
        json_for_unimarc(), {&#39;a&#39;: &#39;title&#39;, &#39;e&#39;: &#39;subtitle&#39;}
</pre></div>
</div>
<p>A field definition is made out several sections, each of them identified
by its indentation (like in python).</p>
<p>In this example exist the three most common sections that a field can have:
<code class="docutils literal"><span class="pre">schema</span></code>, <code class="docutils literal"><span class="pre">creator</span></code> and <code class="docutils literal"><span class="pre">producer</span></code>.  Even though there could be more
sections, we will explain only the ones that <em>Invenio</em> provides,  In fact, the
aforementioned ones are inside the core of the <em>JSONAlchemy</em>, while the rest
are already defined as extensions by <em>Invenio</em>. Be aware that new sections
could come via extensions.</p>
<p>Each of these sections adds some information to the dictionary representing the
field definition. For example, the dictionary generated for the field defined
above would be something like:</p>
<div class="highlight-python"><div class="highlight"><pre>{&#39;aliases&#39;: [],
 &#39;extend&#39;: False,
 &#39;override&#39;: False,
 &#39;pid&#39;: None,
 &#39;producer&#39;: {
     &#39;json_for_marc&#39;: [((), {&#39;a&#39;: &#39;title&#39;, &#39;b&#39;: &#39;subtitle&#39;})],
     &#39;json_for_dc&#39;: [(), {&#39;dc:title&#39;: &#39;&#39;}]
     &#39;json_for_unimarc&#39;: [(), {&#39;a&#39;: &#39;title&#39;, &#39;e&#39;: &#39;subtitle&#39;}]}
 &#39;rules&#39;: {
     &#39;json&#39;: [
         {&#39;decorators&#39;: {&#39;after&#39;: {}, &#39;before&#39;: {}, &#39;on&#39;: {}},
         &#39;function&#39;: &lt;code object &lt;module&gt; at 0x10f173030, file &quot;&quot;, line 1&gt;,
         &#39;source_format&#39;: &#39;json&#39;,
         &#39;source_tags&#39;: [&#39;title&#39;],
         &#39;type&#39;: &#39;creator&#39;}],
     &#39;marc&#39;: [
         {&#39;decorators&#39;: {&#39;after&#39;: {}, &#39;before&#39;: {}, &#39;on&#39;: {&#39;legacy&#39;: None}},
         &#39;function&#39;: &lt;code object &lt;module&gt; at 0x10f10de30, file &quot;&quot;, line 1&gt;,
         &#39;source_format&#39;: &#39;marc&#39;,
         &#39;source_tags&#39;: [&#39;245__&#39;],
         &#39;type&#39;: &#39;creator&#39;}]}}
</pre></div>
</div>
<p>Only one field is shown here, but one file could contain from one up to <em>n</em>
field definitions. Check out the <code class="docutils literal"><span class="pre">atlantis.cfg</span></code> file from the <em>Invenio demo
site</em> to get a quick view about how the configuration file for your fields
should look like.</p>
<p>For the BFN lovers, this is something close to the grammar used to parse this:</p>
<div class="highlight-python"><div class="highlight"><pre>rule       ::= [pid | extend | override]
            json_id [&quot;,&quot; aliases]&quot;:&quot;
                body
json_id    ::= (letter|&quot;_&quot;) (letter|digit|_)*
aliases    ::= json_id [&quot;,&quot; aliases]

pid        ::= @persitent_identifier( level )
extend     ::= @extend
override   ::= @override

body       ::=(creator* | derived | calculated) (extensions)*

creator    ::= [decorators] format &quot;,&quot; tag &quot;,&quot; expr
derived    ::= [decorators] expr
calculated ::= [decorators] expr
</pre></div>
</div>
<div class="section" id="creator">
<h4>Creator<a class="headerlink" href="#creator" title="Permalink to this headline">¶</a></h4>
<p>The creator is the one of most important parts of the field definition: Inside
it, the content of the field is created, while the way this happens depends on
its origin.</p>
<p>The creator section is the one used to define the fields that are coming
directly from the input file and don&#8217;t depend on any type of calculation from
another source. We also call this kind of field a <strong>real field</strong>.</p>
<p>This section can be made out of one or several lines, each one representing the
translation of the field, from whatever the input format is, into JSON.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">marc</span><span class="p">,</span> <span class="s">&#39;245..&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;title&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">],</span> <span class="s">&#39;subtitle&#39;</span><span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="n">b</span><span class="p">]}</span>
</pre></div>
</div>
<p>This tells us that any field that matches the regular expression <code class="docutils literal"><span class="pre">245..</span></code>
(more regular expressions could be specified space separated), the master
format <code class="docutils literal"><span class="pre">marc</span></code> will be used, and that the transformation <code class="docutils literal"><span class="pre">{'title':</span>
<span class="pre">value['a'],</span> <span class="pre">'subtitle':</span> <span class="pre">value[b]}</span></code> will be applied.</p>
<p>The transformation must be a valid python expression as it will be evaluated as
such. In it, the value of the field with which we are dealing with is available
as <code class="docutils literal"><span class="pre">value</span></code> (typically a dictionary). This python expression can also be a
function call. This function can either be imported via the <code class="docutils literal"><span class="pre">__import__()</span></code>
function or implemented in the <code class="docutils literal"><span class="pre">/functions</span></code> folder, the contents of which it
are imported automatically.</p>
<p>For each master format that we want to deal with we need to have a <code class="docutils literal"><span class="pre">Reader</span></code>, we
will see afterwards what that is and how to create one. A reader for JSON and
for MARC21 is provided by default with <em>Invenio</em>. See <a class="reference internal" href="#readers"><span>Readers</span></a> for more
information about readers and <a class="reference internal" href="#how-to-extend-jsonalchemy-behaviour"><span>How to Extend JSONAlchemy Behaviour</span></a> to
learn how to write your own reader.</p>
<p>Along with each creator rule there could be one or more decorators (like in
python). We will describe the default decorators that are implemented and how
to do more later in the <a class="reference internal" href="#decorators"><span>Decorators</span></a> section.</p>
</div>
<div class="section" id="derived">
<h4>Derived<a class="headerlink" href="#derived" title="Permalink to this headline">¶</a></h4>
<p>When a field is derived from a source that is <em>not</em> the input file and needs to
be calculated only when the source it depends on changes (this is expected to
happen infrequently) it is called a <strong>derived virtual field</strong>.</p>
<p>An example of a virtual field could be something like this:</p>
<div class="highlight-python"><div class="highlight"><pre>number_of_authors:
    derived:
        @depends_on(&#39;authors&#39;)
        len(self[&#39;authors&#39;])
</pre></div>
</div>
<p>This section is similar to the previous one, creator, but in this case each
line is just a valid python expression.</p>
</div>
<div class="section" id="calculated">
<h4>Calculated<a class="headerlink" href="#calculated" title="Permalink to this headline">¶</a></h4>
<p>Another type of <strong>virtual fields</strong> are the ones which values&#8217; change a lot
over time; for example the number of comments that a record inside <em>Invenio</em>
has or the number of reviews that a paper has.</p>
<p>In these cases we use calculated field definitions. Following the example of
the number of comments, this could be its definition:</p>
<div class="highlight-python"><div class="highlight"><pre>number_of_comments:
    calculated:
        @parse_first(&#39;recid&#39;)
        @memoize(30)
        get_number_of_comments(self.get(&#39;recid&#39;))
</pre></div>
</div>
<p>The way that a calculate rule is defined is the same as for the derived fields.</p>
<p>One important point about the calculated fields is caching. One field could be:</p>
<ul class="simple">
<li>Always cached - until someone (some other module) changes its name</li>
<li>Cached for a period of time - like in the example,</li>
<li>Not cached at all - so its value is calculated every time.</li>
</ul>
<p>See the <a class="reference internal" href="#decorators"><span>Decorators</span></a> for more information about this.</p>
</div>
<div class="section" id="schema">
<h4>Schema<a class="headerlink" href="#schema" title="Permalink to this headline">¶</a></h4>
<p>Here we can specify the <strong>schema</strong> or structure that the field should follow.
This is done using <a class="reference external" href="http://github.com/nicolaiarocci/cerberus">nicolaiarocci/cerberus</a> and you read the documentation on
how to use it in <a class="reference external" href="http://cerberus.readthedocs.org/en/latest/">read the docs</a>.</p>
<p><em>JSONAlchemy</em> only adds two things to the default <em>cerberus</em>:</p>
<ol class="arabic simple">
<li>The <code class="docutils literal"><span class="pre">force</span></code> boolean value that tells if the value of the filed needs to be
casted to <code class="docutils literal"><span class="pre">type</span></code>.</li>
<li>The <code class="docutils literal"><span class="pre">default</span></code> function (which has no parameters) that is used if the field
has a default value.</li>
</ol>
<p>An example of the schema section could be:</p>
<div class="highlight-python"><div class="highlight"><pre>schema:
    {&#39;uuid&#39;: {&#39;type&#39;:&#39;uuid&#39;, &#39;required&#39;: True, &#39;default&#39;: lambda: str(__import__(&#39;uuid&#39;).uuid4())}}
</pre></div>
</div>
</div>
<div class="section" id="description">
<h4>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h4>
<p>This is an special section as it could be used without the block:</p>
<div class="highlight-python"><div class="highlight"><pre>uuid:
    &quot;&quot;&quot;
    This is the main persistent identifier of a document and will be
    used
    internally as this, therefore the pid important should always
    be &#39;0&#39;.
    &quot;&quot;&quot;

recid:
    description:
        &quot;&quot;&quot;Record main identifier. &quot;&quot;&quot;
</pre></div>
</div>
<p>Both cases have the same syntax (triple-quoted strings a-la python) and the
same end result.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The docstrings are not used anywhere else but inside the
configuration files, for now. The plan is to use them to build the sites
data model documentation using spinxh, therefore is quite important to
write them and keep them updated.</p>
</div>
</div>
<div class="section" id="json">
<h4>JSON<a class="headerlink" href="#json" title="Permalink to this headline">¶</a></h4>
<p>Not all the fields that we want to use have a JSON-friendly representation.
Consider a date that we would like to use as a <code class="docutils literal"><span class="pre">datetime</span></code> object, yet
we want to store it as a JSON object.</p>
<p>To solve this issue, we introduced the JSON section where a couple of
functions:</p>
<ul class="simple">
<li><strong>loads</strong> to load the JSON representation from the database into an object,
and</li>
<li><strong>dumps</strong> which does the opposite.</li>
</ul>
<p>A clear example of that is the <code class="docutils literal"><span class="pre">creation_date</span></code> field:</p>
<div class="highlight-python"><div class="highlight"><pre>creation_date:
    json:
        dumps, lambda d: d.isoformat()
        loads, lambda d: __import__(&#39;dateutil&#39;).parser.parse(d)
</pre></div>
</div>
<p>Both functions take only one argument, which is the value of the field.</p>
</div>
<div class="section" id="producer">
<h4>Producer<a class="headerlink" href="#producer" title="Permalink to this headline">¶</a></h4>
<p>Generating a different output from a JSON object is not always easy: there
might be implications among fields or rules. For this reason the producer
section was introduced. The producer section can also be seen as a kind of
documentation on how a field is exported to different formats and which formats
those are.</p>
<p>This is an example of its use:</p>
<div class="highlight-python"><div class="highlight"><pre>title:
    creator:
        marc, &quot;245..&quot;, { &#39;title&#39;:value[&#39;a&#39;], &#39;subtitle&#39;: value[&#39;b&#39;]}
    producer:
        json_for_marc(), {&#39;a&#39;: &#39;title&#39;, &#39;b&#39;: &#39;subtitle&#39;}
        json_for_dc(), {&#39;dc:title&#39;: &#39;title&#39;}
</pre></div>
</div>
<p>Each rule inside the producer section follows the same pattern: first we
specify the function that we want to use (what we want to produce), which
should be placed inside the <code class="docutils literal"><span class="pre">/producers</span></code> folder. This is not a real function
call, but only a way to specify which producer we will use and which parameter
we would like  to use for this field. In the case of the MARC21 producer we can
put <code class="docutils literal"><span class="pre">245__</span></code> as parameter, so that only if title originated from a <code class="docutils literal"><span class="pre">245__</span></code>
MARC21 field this function will be used to generate the output. This parameter
could be used differently depending on each producer.</p>
<p>The second part, after the comma, is the rule that we will apply and it is
typically a dictionary. In the case of the MARC21 producer we can put full name
of the field as key, <code class="docutils literal"><span class="pre">245__a</span></code>, or just the subfield like in the example. The
value for this key could a function call, a subfield or even empty (if we want
to use the entire field as a value).</p>
<p>For more information about the MARC22 producer please check
<a class="reference internal" href="#json-for-marc"><span>JSON for MARC</span></a> documentation.</p>
<p>Inside any JSONAlchemy object, like records or documents, there is a method,
<code class="docutils literal"><span class="pre">produce(producer_code,</span> <span class="pre">fields=None)</span></code>, that uses this and outputs a
dictionary with a certain &#8220;flavor&#8221;. This new representation of the JSON object
could be used elsewhere, for example in the formatter module, to generate the
desired output in a easier way than only using the JSON object.</p>
</div>
<div class="section" id="decorators">
<span id="id2"></span><h4>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h4>
<p>Like python decorators, field decorators could be used either to add extra
information to the field itself or to modify the translation process that
creates the field.</p>
<p>There are two different types of field decorators, one that decorates the
entire field and the other that decorates one creator/derived/calculated rule.
As well as for the sections in the field definition new decorators could be
defined to extend the current ones.</p>
<div class="section" id="field-decorators">
<h5>Field Decorators<a class="headerlink" href="#field-decorators" title="Permalink to this headline">¶</a></h5>
<p>This type of decorators should be used outside of the field definition and
affects the whole field, maybe adding some information to the dictionary that
defines it.</p>
<p><em>Invenio</em> provides three different field decorators:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">&#64;persitent_identifier(int)</span></code>: Identifies a field as a <em>PID</em> with a
priority, which could later be accessed using the <code class="docutils literal"><span class="pre">persistent_identifiers</span></code>
property</li>
<li><code class="docutils literal"><span class="pre">&#64;override</span></code>: As its name points out, it allows us to completely override
the field definition.</li>
<li><code class="docutils literal"><span class="pre">&#64;extend</span></code>: Allows us extend an existing field with, for example, new
creator rules.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are currently no extensions for this type of decorators.
It is in the road map to allow each <em>Invenio</em> instace to extend these
decorators with any other that they might need.</p>
</div>
</div>
<div class="section" id="rule-decorators">
<h5>Rule Decorators<a class="headerlink" href="#rule-decorators" title="Permalink to this headline">¶</a></h5>
<p>This other type of decorators applies to the creator/derived/calculated rules.
For example:</p>
<div class="highlight-python"><div class="highlight"><pre>authors:
&quot;&quot;&quot;List with all the authors, connected with main_author and rest_authors&quot;&quot;&quot;
derived:
    @parse_first(&#39;_first_author&#39;, &#39;_additional_authors&#39;)
    @connect(&#39;_first_author&#39;, sync_authors)
    @connect(&#39;_additional_authors&#39;, sync_authors)
    @only_if(&#39;_firs_author&#39; in self or &#39;_additional_authors&#39; in self)
    util_merge_fields_info_list(self, [&#39;_first_author&#39;, &#39;_additional_authors&#39;])
</pre></div>
</div>
<p>These decorators are applied only if the derived rule of the field <code class="docutils literal"><span class="pre">authors</span></code>
is applied.</p>
<p>The rule decorators are split into three different kinds depending on when
they are evaluated: before the rule gets evaluated, during the evaluation of
the rule and after the rule evaluation.</p>
<p>This is the list of rule decorators available in <em>Invenio</em> and what they are
used for.</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">connect(field_name,</span> <span class="pre">handler=None)</span></code></dt>
<dd><p class="first">This is an post-evaluation decorator that allows the connection between
fields. This connection is bidirectional: if the connected field gets
modified, then the decorated field also gets modified and vice versa.</p>
<p class="last">The optional handler function will be called whenever there is any
modification in any of the fields. The default behavior is to propagate the
value across all the connected fields.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">depends_on(*field_names)</span></code></dt>
<dd><p class="first">This decorator acts before rule evaluation and tells JSONAlchemy whether
the rule will be evaluated depending on the existence of the
<code class="docutils literal"><span class="pre">field_names</span></code> inside the current JSON object.</p>
<p class="last">If the fields are not in the JSON object and their rules have not been
evaluated yet, then it will try to evaluate them before failing.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">legacy(master_format,</span> <span class="pre">legay_field,</span> <span class="pre">matching)</span></code></dt>
<dd>An on-evaluation decorator that adds some legacy information to the rule
that its being applied.
The master format is not important if dealing with a creator rule (it will
be derived from the rule), otherwise it needs to specified.
The matching argument is typically a tuple where we connect the legacy
field with the subfields.</dd>
<dt><code class="docutils literal"><span class="pre">memoize(life_time=0)</span></code></dt>
<dd>This post-evaluation decorator only works with calculated fields. It
creates a cached value of the field that is decorated for a determined
time.</dd>
<dt><code class="docutils literal"><span class="pre">only_if_master_value(*boolean_expresions)</span></code></dt>
<dd><p class="first">On-evaluation decorator that gives access to the current master value. It
is typically used to evaluate one rule only if the master value matches a
series of conditions.</p>
<p class="last">The boolean expression could be any python expression that is evaluated to
<code class="docutils literal"><span class="pre">True</span></code> or <code class="docutils literal"><span class="pre">Flase</span></code>.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">only_if(*boolean_expresions)</span></code></dt>
<dd>Like the previous one, but in this case we don&#8217;t have access to the current
master value, only to the current JSON object.</dd>
<dt><code class="docutils literal"><span class="pre">parse_first(*field_names)</span></code></dt>
<dd>This could be seen as a lighter version of <code class="docutils literal"><span class="pre">depends_on</span></code>. However, in this
case the rule will be evaluated even if the fields names are not inside the
JSON object - it only triggers parsing the rules for the fields.</dd>
</dl>
<p>For more information about the decorators, and also about the other extensions,
check the <a class="reference internal" href="#parsers"><span>Parsers</span></a> section.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Be aware that, right now, the order of the decorators is not respected.</p>
</div>
</div>
</div>
</div>
<div class="section" id="model-configuration-file">
<h3>Model Configuration File<a class="headerlink" href="#model-configuration-file" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="readers">
<span id="id3"></span><h3>Readers<a class="headerlink" href="#readers" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="how-it-works">
<h2>How it Works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="how-to-extend-jsonalchemy-behaviour">
<span id="id4"></span><h2>How to Extend JSONAlchemy Behaviour<a class="headerlink" href="#how-to-extend-jsonalchemy-behaviour" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="invenio-use-cases">
<h2>Invenio Use Cases<a class="headerlink" href="#invenio-use-cases" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="api-documentation">
<h2>API Documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h2>
<p>This documentation is automatically generated from JSONAlchemy&#8217;s source code.</p>
<div class="section" id="core">
<h3>Core<a class="headerlink" href="#core" title="Permalink to this headline">¶</a></h3>
<div class="section" id="module-invenio.modules.jsonalchemy.bases">
<span id="bases"></span><h4>Bases<a class="headerlink" href="#module-invenio.modules.jsonalchemy.bases" title="Permalink to this headline">¶</a></h4>
<p>General extensions for JSON objects.</p>
<p>JSONAlchemy allows the developer to extend the behavior or capabilities of the
JSON objects using <cite>extensions</cite>. For more information about how extensions
works check <a class="reference internal" href="#invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser" title="invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser"><code class="xref py py-class docutils literal"><span class="pre">invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser</span></code></a>.</p>
<dl class="class">
<dt id="invenio.modules.jsonalchemy.bases.Versionable">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.bases.</code><code class="descname">Versionable</code><a class="headerlink" href="#invenio.modules.jsonalchemy.bases.Versionable" title="Permalink to this definition">¶</a></dt>
<dd><p>Versionable behavior for JSONAlchemy models.</p>
<dl class="method">
<dt id="invenio.modules.jsonalchemy.bases.Versionable.update">
<code class="descname">update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.bases.Versionable.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new revision of the object and saves link to the old one.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-invenio.modules.jsonalchemy.errors">
<span id="errors"></span><h4>Errors<a class="headerlink" href="#module-invenio.modules.jsonalchemy.errors" title="Permalink to this headline">¶</a></h4>
<p>JSONAlchemy errors.</p>
<dl class="exception">
<dt id="invenio.modules.jsonalchemy.errors.FieldParserException">
<em class="property">exception </em><code class="descclassname">invenio.modules.jsonalchemy.errors.</code><code class="descname">FieldParserException</code><a class="headerlink" href="#invenio.modules.jsonalchemy.errors.FieldParserException" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when some error happens parsing field definitions.</p>
</dd></dl>

<dl class="exception">
<dt id="invenio.modules.jsonalchemy.errors.JSONAlchemyException">
<em class="property">exception </em><code class="descclassname">invenio.modules.jsonalchemy.errors.</code><code class="descname">JSONAlchemyException</code><a class="headerlink" href="#invenio.modules.jsonalchemy.errors.JSONAlchemyException" title="Permalink to this definition">¶</a></dt>
<dd><p>Base exception.</p>
</dd></dl>

<dl class="exception">
<dt id="invenio.modules.jsonalchemy.errors.ModelParserException">
<em class="property">exception </em><code class="descclassname">invenio.modules.jsonalchemy.errors.</code><code class="descname">ModelParserException</code><a class="headerlink" href="#invenio.modules.jsonalchemy.errors.ModelParserException" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when some error happens parsing model definitions.</p>
</dd></dl>

<dl class="exception">
<dt id="invenio.modules.jsonalchemy.errors.ReaderException">
<em class="property">exception </em><code class="descclassname">invenio.modules.jsonalchemy.errors.</code><code class="descname">ReaderException</code><a class="headerlink" href="#invenio.modules.jsonalchemy.errors.ReaderException" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when some error happens reading a blob.</p>
</dd></dl>

</div>
<div class="section" id="base-model-and-field-parser">
<h4>Base Model and Field Parser<a class="headerlink" href="#base-model-and-field-parser" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="invenio.modules.jsonalchemy.parser._create_field_parser">
<code class="descclassname">invenio.modules.jsonalchemy.parser.</code><code class="descname">_create_field_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser._create_field_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a parser that can handle field definitions.</p>
<p>BFN like grammar:</p>
<div class="highlight-python"><div class="highlight"><pre>rule       ::= [pid | extend | override]
               json_id [&quot;,&quot; aliases]&quot;:&quot;
                   body
json_id    ::= (letter|&quot;_&quot;) (letter|digit|_)*
aliases    ::= json_id [&quot;,&quot; aliases]

pid        ::= @persistent_identifier( level )
extend     ::= @extend
override   ::= @override
hidden     ::= @hidden

body       ::=(creator* | derived | calculated) (extensions)*

creator    ::= [decorators] format &quot;,&quot; tag &quot;,&quot; expr
derived    ::= [decorators] expr
calculated ::= [decorators] expr
</pre></div>
</div>
<p>To check the syntactics of the parser extensions or decorators please go to
<a class="reference internal" href="#module-invenio.modules.jsonalchemy.jsonext.parsers" title="invenio.modules.jsonalchemy.jsonext.parsers"><code class="xref py py-mod docutils literal"><span class="pre">invenio.modules.jsonalchemy.jsonext.parsers</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="invenio.modules.jsonalchemy.parser._create_model_parser">
<code class="descclassname">invenio.modules.jsonalchemy.parser.</code><code class="descname">_create_model_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser._create_model_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a parser that can handle model definitions.</p>
<p>BFN like grammar:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">TODO</span>
</pre></div>
</div>
<p>Note: Unlike the field configuration files where you can specify more than
one field inside each file for the models only one definition is
allowed by file.</p>
</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.parser.FieldParser">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.parser.</code><code class="descname">FieldParser</code><span class="sig-paren">(</span><em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser.FieldParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Field definitions parser.</p>
<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.parser.FieldParser.decorator_after_extensions">
<em class="property">classmethod </em><code class="descname">decorator_after_extensions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser.FieldParser.decorator_after_extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.parser.FieldParser.decorator_before_extensions">
<em class="property">classmethod </em><code class="descname">decorator_before_extensions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser.FieldParser.decorator_before_extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.parser.FieldParser.decorator_on_extensions">
<em class="property">classmethod </em><code class="descname">decorator_on_extensions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser.FieldParser.decorator_on_extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.parser.FieldParser.field_definition_model_based">
<em class="property">classmethod </em><code class="descname">field_definition_model_based</code><span class="sig-paren">(</span><em>field_name</em>, <em>model_name</em>, <em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser.FieldParser.field_definition_model_based" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the real field definition based on the model name.</p>
<p>Based on a model name (and namespace) it gets the real field
definition.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.parser.FieldParser.field_definitions">
<em class="property">classmethod </em><code class="descname">field_definitions</code><span class="sig-paren">(</span><em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser.FieldParser.field_definitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all the field definitions from a given namespace.</p>
<p>If the namespace does not exist, it tries to create it first</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.parser.FieldParser.field_extensions">
<em class="property">classmethod </em><code class="descname">field_extensions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser.FieldParser.field_extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the field parser extensions from the parser registry.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.parser.FieldParser.legacy_field_matchings">
<em class="property">classmethod </em><code class="descname">legacy_field_matchings</code><span class="sig-paren">(</span><em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser.FieldParser.legacy_field_matchings" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all the legacy mappings for a given namespace.</p>
<p>If the namespace does not exist, it tries to create it first</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">See:</th><td class="field-body">guess_legacy_field_names()</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.parser.FieldParser.reparse">
<em class="property">classmethod </em><code class="descname">reparse</code><span class="sig-paren">(</span><em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser.FieldParser.reparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Reparse all the fields.</p>
<p>Invalidate the cached version of all the fields inside the given
namespace and parse them again.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.parser.ModelParser">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.parser.</code><code class="descname">ModelParser</code><span class="sig-paren">(</span><em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser.ModelParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Record model parser.</p>
<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.parser.ModelParser.model_definitions">
<em class="property">classmethod </em><code class="descname">model_definitions</code><span class="sig-paren">(</span><em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser.ModelParser.model_definitions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all the model definitions given a namespace.</p>
<p>If the namespace does not exist, it tries to create it first.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.parser.ModelParser.parser_extensions">
<em class="property">classmethod </em><code class="descname">parser_extensions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser.ModelParser.parser_extensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get only the model parser extensions from the parser registry.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.parser.ModelParser.reparse">
<em class="property">classmethod </em><code class="descname">reparse</code><span class="sig-paren">(</span><em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser.ModelParser.reparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Invalidate the cached version of all the models.</p>
<p>It does it inside the given namespace and parse it again.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.parser.ModelParser.resolve_models">
<em class="property">classmethod </em><code class="descname">resolve_models</code><span class="sig-paren">(</span><em>model_list</em>, <em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.parser.ModelParser.resolve_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolve all the field conflicts.</p>
<p>From a given list of model definitions resolves all the field conflicts
and returns a new model definition containing all the information from
the model list.
The field definitions are resolved from left-to-right.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>model_list</strong> &#8211; It could be also a string, in which case the model
definition is returned as it is.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Dictionary containing the union of the model definitions.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="base-reader">
<h4>Base Reader<a class="headerlink" href="#base-reader" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="invenio.modules.jsonalchemy.reader.Reader">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.reader.</code><code class="descname">Reader</code><span class="sig-paren">(</span><em>json</em>, <em>blob=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.reader.Reader" title="Permalink to this definition">¶</a></dt>
<dd><p>Base reader.</p>
<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.reader.Reader.add">
<em class="property">classmethod </em><code class="descname">add</code><span class="sig-paren">(</span><em>json</em>, <em>fields</em>, <em>blob=None</em>, <em>fetch_model_info=False</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.reader.Reader.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the list of fields to the json structure.</p>
<p>If fields is <code class="docutils literal"><span class="pre">None</span></code> it adds all the possible fields from the current
model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>json</strong> &#8211; Any <code class="docutils literal"><span class="pre">SmartJson</span></code> object</li>
<li><strong>fields</strong> &#8211; Dict of fields to be added to the json structure
containing field_name:json_id</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.reader.Reader.process_model_info">
<em class="property">classmethod </em><code class="descname">process_model_info</code><span class="sig-paren">(</span><em>json</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.reader.Reader.process_model_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Process model information.</p>
<p>Fetches all the possible information about the current models and
applies all the model extensions <cite>evaluate</cite> methods if any extension is
used.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.reader.Reader.set">
<em class="property">classmethod </em><code class="descname">set</code><span class="sig-paren">(</span><em>json</em>, <em>field</em>, <em>value=None</em>, <em>set_default_value=False</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.reader.Reader.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set new field value to json object.</p>
<p>When adding a new field to the json object finds as much information
about it as possible and attaches it to the json object inside
<code class="docutils literal"><span class="pre">json['__meta_metadata__'][field]</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>json</strong> &#8211; Any <code class="docutils literal"><span class="pre">SmartJson</span></code> object</li>
<li><strong>field</strong> &#8211; Name of the new field to be added</li>
<li><strong>value</strong> &#8211; New value for the field (if not <code class="docutils literal"><span class="pre">None</span></code>)</li>
<li><strong>set_default_value</strong> &#8211; If set to <code class="docutils literal"><span class="pre">True</span></code> looks for the default
value if any and sets it.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="invenio.modules.jsonalchemy.reader.Reader.split_blob">
<em class="property">static </em><code class="descname">split_blob</code><span class="sig-paren">(</span><em>blob</em>, <em>schema=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.reader.Reader.split_blob" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify how to split the blob by single record.</p>
<p>In case of several records inside the blob this method specify how to
split then and work one by one afterwards.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.reader.Reader.translate">
<em class="property">classmethod </em><code class="descname">translate</code><span class="sig-paren">(</span><em>blob</em>, <em>json_class</em>, <em>master_format='json'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.reader.Reader.translate" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform the incoming blob into a json structure (<code class="docutils literal"><span class="pre">json_class</span></code>).</p>
<p>It uses the rules described in the field and model definitions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>blob</strong> &#8211; incoming blob (like MARC)</li>
<li><strong>json_class</strong> &#8211; Any subclass of
<a class="reference internal" href="#invenio.modules.jsonalchemy.wrappers.SmartJson" title="invenio.modules.jsonalchemy.wrappers.SmartJson"><code class="xref py py-class docutils literal"><span class="pre">SmartJson</span></code></a></li>
<li><strong>master_format</strong> &#8211; Master format of the input blob.</li>
<li><strong>kwargs</strong> &#8211; parameter to pass to json_class</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">New object of <code class="docutils literal"><span class="pre">json_class</span></code> type containing the result of the
translation</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.reader.Reader.update">
<em class="property">classmethod </em><code class="descname">update</code><span class="sig-paren">(</span><em>json</em>, <em>fields</em>, <em>blob=None</em>, <em>update_db=False</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.reader.Reader.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the fields given from the json structure.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>json</strong> &#8211; Any <code class="docutils literal"><span class="pre">SmartJson</span></code> object</li>
<li><strong>blob</strong> &#8211; incoming blob (like MARC), if <code class="docutils literal"><span class="pre">None</span></code>, <code class="docutils literal"><span class="pre">json.get_blob</span></code>
will be used to retrieve it if needed.</li>
<li><strong>fields</strong> &#8211; List of fields to be updated, if <code class="docutils literal"><span class="pre">None</span></code> all fields
will be updated.</li>
<li><strong>save</strong> &#8211; If set to <code class="docutils literal"><span class="pre">True</span></code> a &#8216;soft save&#8217; will be performed with
the changes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.reader.Reader.update_meta_metadata">
<em class="property">classmethod </em><code class="descname">update_meta_metadata</code><span class="sig-paren">(</span><em>json</em>, <em>blob=None</em>, <em>fields=None</em>, <em>section=None</em>, <em>keep_core_values=True</em>, <em>store_backup=True</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.reader.Reader.update_meta_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the meta-metadata for a guiven set of fields.</p>
<p>If it is <code class="docutils literal"><span class="pre">None</span></code> all fields will be used.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-invenio.modules.jsonalchemy.registry">
<span id="registries"></span><h4>Registries<a class="headerlink" href="#module-invenio.modules.jsonalchemy.registry" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="storage-engine-interface">
<h4>Storage Engine Interface<a class="headerlink" href="#storage-engine-interface" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="invenio.modules.jsonalchemy.storage.Storage">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.storage.</code><code class="descname">Storage</code><span class="sig-paren">(</span><em>model</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.storage.Storage" title="Permalink to this definition">¶</a></dt>
<dd><p>Default storage engine interface.</p>
<dl class="method">
<dt id="invenio.modules.jsonalchemy.storage.Storage.create">
<code class="descname">create</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.storage.Storage.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create underlying empty storage.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.storage.Storage.drop">
<code class="descname">drop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.storage.Storage.drop" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop data from underlying storage.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.storage.Storage.get_field_values">
<code class="descname">get_field_values</code><span class="sig-paren">(</span><em>ids</em>, <em>field</em>, <em>repetitive_values=True</em>, <em>count=False</em>, <em>include_recid=False</em>, <em>split_by=0</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.storage.Storage.get_field_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of field values for field for the given ids.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ids</strong> &#8211; list (or iterable) of integers</li>
<li><strong>repetitive_values</strong> &#8211; if set to True, returns all values even if
they are doubled.  If set to False, then return unique values only.</li>
<li><strong>count</strong> &#8211; in combination with repetitive_values=False, adds to the
result the number of occurrences of the field.</li>
<li><strong>split</strong> &#8211; specifies the size of the output.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.storage.Storage.get_fields_values">
<code class="descname">get_fields_values</code><span class="sig-paren">(</span><em>ids</em>, <em>fields</em>, <em>repetitive_values=True</em>, <em>count=False</em>, <em>include_recid=False</em>, <em>split_by=0</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.storage.Storage.get_fields_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary of field values for field for the given ids.</p>
<p>As in <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_field_values" title="invenio.modules.jsonalchemy.storage.Storage.get_field_values"><code class="xref py py-meth docutils literal"><span class="pre">get_field_values()</span></code></a>
but in this case returns a dictionary with each of
the fields and the list of field values.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.storage.Storage.get_many">
<code class="descname">get_many</code><span class="sig-paren">(</span><em>ids</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.storage.Storage.get_many" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterable of json objects which id is inside ids.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.storage.Storage.get_one">
<code class="descname">get_one</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.storage.Storage.get_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the json matching the id.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.storage.Storage.save_many">
<code class="descname">save_many</code><span class="sig-paren">(</span><em>jsons</em>, <em>ids=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.storage.Storage.save_many" title="Permalink to this definition">¶</a></dt>
<dd><p>Store many JSON as elements on the iterable jsons.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.storage.Storage.save_one">
<code class="descname">save_one</code><span class="sig-paren">(</span><em>json</em>, <em>id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.storage.Storage.save_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Store one json in the storage system.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.storage.Storage.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.storage.Storage.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve all entries which match the query JSON prototype document.</p>
<p>This method should not be used on storage engines without native JSON
support (e.g., MySQL). Returns a cursor over the matched documents.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>query</strong> &#8211; dictionary specifying the search prototype document</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.storage.Storage.update_many">
<code class="descname">update_many</code><span class="sig-paren">(</span><em>jsons</em>, <em>ids=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.storage.Storage.update_many" title="Permalink to this definition">¶</a></dt>
<dd><p>Update many json objects following the same rule as update_one.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.storage.Storage.update_one">
<code class="descname">update_one</code><span class="sig-paren">(</span><em>json</em>, <em>id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.storage.Storage.update_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Update one JSON.</p>
<p>If id is None a field representing the id is expected inside the
JSON object.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="default-validator">
<h4>Default Validator<a class="headerlink" href="#default-validator" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="invenio.modules.jsonalchemy.validator.Validator">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.validator.</code><code class="descname">Validator</code><span class="sig-paren">(</span><em>schema=None</em>, <em>transparent_schema_rules=True</em>, <em>ignore_none_values=False</em>, <em>allow_unknown=True</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.validator.Validator" title="Permalink to this definition">¶</a></dt>
<dd><p>Cerberus validator.</p>
<dl class="staticmethod">
<dt id="invenio.modules.jsonalchemy.validator.Validator.force_type">
<em class="property">static </em><code class="descname">force_type</code><span class="sig-paren">(</span><em>document</em>, <em>field</em>, <em>type_</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.validator.Validator.force_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Force <cite>field</cite> content to <cite>type</cite>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-invenio.modules.jsonalchemy.wrappers">
<span id="wrappers"></span><h4>Wrappers<a class="headerlink" href="#module-invenio.modules.jsonalchemy.wrappers" title="Permalink to this headline">¶</a></h4>
<p>JSONAlchemy wrappers.</p>
<dl class="class">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.wrappers.</code><code class="descname">SmartJson</code><span class="sig-paren">(</span><em>json=None</em>, <em>set_default_values=False</em>, <em>process_model_info=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for Json structures.</p>
<dl class="attribute">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson.additional_info">
<code class="descname">additional_info</code><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson.additional_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut to <cite>__meta_metadata__.__additional_info__</cite>.</p>
</dd></dl>

<dl class="attribute">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson.continuable_errors">
<code class="descname">continuable_errors</code><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson.continuable_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut to <cite>__meta_metadata__.__continuable_errors__</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson.dumps">
<code class="descname">dumps</code><span class="sig-paren">(</span><em>without_meta_metadata=False</em>, <em>with_calculated_fields=False</em>, <em>clean=False</em>, <em>keywords=None</em>, <em>filter_hidden=False</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson.dumps" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the JSON friendly representation of the current object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>without_meta_metadata</strong> &#8211; by default <code class="docutils literal"><span class="pre">False</span></code>, if set to <code class="docutils literal"><span class="pre">True</span></code>
all the <code class="docutils literal"><span class="pre">__meta_metadata__</span></code> will be removed from the output.</li>
<li><strong>wit_calculated_fields</strong> &#8211; by default the calculated fields are not
dump, if they are needed in the output set it to <code class="docutils literal"><span class="pre">True</span></code></li>
<li><strong>clean</strong> &#8211; if set to <code class="docutils literal"><span class="pre">True</span></code> all the keys stating with <code class="docutils literal"><span class="pre">_</span></code> will
be removed from the ouput</li>
<li><strong>keywords</strong> &#8211; list of keywords to dump. if None, return all</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">JSON friendly object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson.errors">
<code class="descname">errors</code><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson.errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut to <cite>__meta_metadata__.__errors__</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>key</em>, <em>default=None</em>, <em>reset=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Like in <cite>dict.get</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson.get_blob">
<code class="descname">get_blob</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson.get_blob" title="Permalink to this definition">¶</a></dt>
<dd><p>To be override in the specific class.</p>
<p>Should look for the original version of the file where the json came
from.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson.items">
<code class="descname">items</code><span class="sig-paren">(</span><em>without_meta_metadata=False</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Like in <cite>dict.items</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson.iteritems">
<code class="descname">iteritems</code><span class="sig-paren">(</span><em>without_meta_metadata=False</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson.iteritems" title="Permalink to this definition">¶</a></dt>
<dd><p>Like in <cite>dict.items</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson.keys">
<code class="descname">keys</code><span class="sig-paren">(</span><em>without_meta_metadata=False</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Like in <cite>dict.keys</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson.loads">
<code class="descname">loads</code><span class="sig-paren">(</span><em>without_meta_metadata=False</em>, <em>with_calculated_fields=True</em>, <em>clean=False</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson.loads" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the BSON representation of the current object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>without_meta_metadata</strong> &#8211; if set to <code class="docutils literal"><span class="pre">True</span></code> all the
<code class="docutils literal"><span class="pre">__meta_metadata__</span></code> will be removed from the output.</li>
<li><strong>wit_calculated_fields</strong> &#8211; by default the calculated fields are in
the output, if they are not needed set it to <code class="docutils literal"><span class="pre">False</span></code></li>
<li><strong>clean</strong> &#8211; if set to <code class="docutils literal"><span class="pre">True</span></code> all the keys stating with <code class="docutils literal"><span class="pre">_</span></code> will
be removed from the ouput</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">JSON friendly object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson.meta_metadata">
<code class="descname">meta_metadata</code><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson.meta_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut to <cite>__meta_metadata__</cite>.</p>
</dd></dl>

<dl class="attribute">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson.model_info">
<code class="descname">model_info</code><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson.model_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut to <cite>__meta_metadata__.__model_info__</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson.produce">
<code class="descname">produce</code><span class="sig-paren">(</span><em>producer_code</em>, <em>fields=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson.produce" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a different flavor of <cite>JSON</cite> depending on <cite>procuder_code</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>producer_code</strong> &#8211; One of the possible producers listed in the
<cite>producer</cite> section inside the field definitions.</li>
<li><strong>fields</strong> &#8211; List of fields that should be present in the output, if
<cite>None</cite> all fields from <cite>self</cite> will be used.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">It depends on each producer, see producer folder inside
<cite>jsonext</cite>, typically <cite>dict</cite>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson.set_default_values">
<code class="descname">set_default_values</code><span class="sig-paren">(</span><em>fields=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson.set_default_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Set default value for the fields using the schema definition.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fields</strong> &#8211; List of fields to set the default value, if <cite>None</cite> all.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJson.validate">
<code class="descname">validate</code><span class="sig-paren">(</span><em>validator=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJson.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate using current JSON content using Cerberus.</p>
<p>See: (Cerberus)[<a class="reference external" href="http://cerberus.readthedocs.org/en/latest">http://cerberus.readthedocs.org/en/latest</a>].</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>validator</strong> &#8211; Validator to be used, if <cite>None</cite>
<a class="reference internal" href="#invenio.modules.jsonalchemy.validator.Validator" title="invenio.modules.jsonalchemy.validator.Validator"><code class="xref py py-class docutils literal"><span class="pre">Validator</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJsonLD">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.wrappers.</code><code class="descname">SmartJsonLD</code><span class="sig-paren">(</span><em>json=None</em>, <em>set_default_values=False</em>, <em>process_model_info=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJsonLD" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility class for JSON-LD serialization.</p>
<dl class="method">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJsonLD.get_context">
<code class="descname">get_context</code><span class="sig-paren">(</span><em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJsonLD.get_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the context definition identified by the parameter.</p>
<p>If the context is not found in the current namespace, the received
parameter is returned as is, the assumption being that a IRI was
passed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> &#8211; context identifier</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJsonLD.get_jsonld">
<code class="descname">get_jsonld</code><span class="sig-paren">(</span><em>context</em>, <em>new_context={}</em>, <em>format='full'</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJsonLD.get_jsonld" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the JSON-LD serialization.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">context the context to use for raw publishing; each SmartJsonLD
instance is expected to have a default context associated.</td>
</tr>
<tr class="field-even field"><th class="field-name">Param:</th><td class="field-body">new_context the context to use for formatted publishing,
usually supplied by the client; used by the &#8216;compacted&#8217;, &#8216;framed&#8217;,
and &#8216;normalized&#8217; formats.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Param:</th><td class="field-body">format the publishing format; can be &#8216;full&#8217;, &#8216;inline&#8217;,
&#8216;compacted&#8217;, &#8216;expanded&#8217;, &#8216;flattened&#8217;, &#8216;framed&#8217; or &#8216;normalized&#8217;.
Note that &#8216;full&#8217; and &#8216;inline&#8217; are synonims, referring to the
document form which includes the context; for more information see:
[<a class="reference external" href="http://www.w3.org/TR/json-ld/">http://www.w3.org/TR/json-ld/</a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.wrappers.SmartJsonLD.translate">
<code class="descname">translate</code><span class="sig-paren">(</span><em>context_name</em>, <em>context</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.SmartJsonLD.translate" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate object to fit given JSON-LD context.</p>
<p>Should not inject context as this will be done at publication time.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.wrappers.StorageEngine">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.wrappers.</code><code class="descname">StorageEngine</code><span class="sig-paren">(</span><em>name</em>, <em>bases</em>, <em>dct</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.StorageEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>Storage metaclass for parsing application config.</p>
<dl class="attribute">
<dt id="invenio.modules.jsonalchemy.wrappers.StorageEngine.storage_engine">
<code class="descname">storage_engine</code><a class="headerlink" href="#invenio.modules.jsonalchemy.wrappers.StorageEngine.storage_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance of storage engine defined in application config.</p>
<p>It looks for key &#8220;ENGINE&#8217; prefixed by <code class="docutils literal"><span class="pre">__storagename__.upper()</span></code> for
example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Dummy</span><span class="p">(</span><span class="n">SmartJson</span><span class="p">):</span>
    <span class="n">__storagename__</span> <span class="o">=</span> <span class="s">&#39;dummy&#39;</span>
</pre></div>
</div>
<p>will look for key &#8220;DUMMY_ENGINE&#8221; and
&#8220;DUMMY_`DUMMY_ENGINE.__name__.upper()`&#8221; should contain dictionary with
keyword arguments of the engine defined in &#8220;DUMMY_ENGINE&#8221;.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="extensions">
<h3>Extensions<a class="headerlink" href="#extensions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="engines">
<h4>Engines<a class="headerlink" href="#engines" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.engines.cache.</code><code class="descname">CacheStorage</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement storage engine for Flask-Cache useful for testing.</p>
<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.create">
<code class="descname">create</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.create" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.create" title="invenio.modules.jsonalchemy.storage.Storage.create"><code class="xref py py-meth docutils literal"><span class="pre">create()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.drop">
<code class="descname">drop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.drop" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.create" title="invenio.modules.jsonalchemy.storage.Storage.create"><code class="xref py py-meth docutils literal"><span class="pre">create()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.get_field_values">
<code class="descname">get_field_values</code><span class="sig-paren">(</span><em>ids</em>, <em>field</em>, <em>repetitive_values=True</em>, <em>count=False</em>, <em>include_recid=False</em>, <em>split_by=0</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.get_field_values" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_field_values" title="invenio.modules.jsonalchemy.storage.Storage.get_field_values"><code class="xref py py-meth docutils literal"><span class="pre">get_field_values()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.get_fields_values">
<code class="descname">get_fields_values</code><span class="sig-paren">(</span><em>ids</em>, <em>fields</em>, <em>repetitive_values=True</em>, <em>count=False</em>, <em>include_recid=False</em>, <em>split_by=0</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.get_fields_values" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_fields_values" title="invenio.modules.jsonalchemy.storage.Storage.get_fields_values"><code class="xref py py-meth docutils literal"><span class="pre">get_fields_values()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.get_many">
<code class="descname">get_many</code><span class="sig-paren">(</span><em>ids</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.get_many" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_many" title="invenio.modules.jsonalchemy.storage.Storage.get_many"><code class="xref py py-meth docutils literal"><span class="pre">get_many()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.get_one">
<code class="descname">get_one</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.get_one" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_one" title="invenio.modules.jsonalchemy.storage.Storage.get_one"><code class="xref py py-meth docutils literal"><span class="pre">get_one()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.save_many">
<code class="descname">save_many</code><span class="sig-paren">(</span><em>jsons</em>, <em>ids=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.save_many" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.save_many" title="invenio.modules.jsonalchemy.storage.Storage.save_many"><code class="xref py py-meth docutils literal"><span class="pre">save_many()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.save_one">
<code class="descname">save_one</code><span class="sig-paren">(</span><em>data</em>, <em>id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.save_one" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.save_one" title="invenio.modules.jsonalchemy.storage.Storage.save_one"><code class="xref py py-meth docutils literal"><span class="pre">save_one()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.search" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.search" title="invenio.modules.jsonalchemy.storage.Storage.search"><code class="xref py py-meth docutils literal"><span class="pre">search()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.update_many">
<code class="descname">update_many</code><span class="sig-paren">(</span><em>jsons</em>, <em>ids=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.update_many" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.update_many" title="invenio.modules.jsonalchemy.storage.Storage.update_many"><code class="xref py py-meth docutils literal"><span class="pre">update_many()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.update_one">
<code class="descname">update_one</code><span class="sig-paren">(</span><em>data</em>, <em>id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.cache.CacheStorage.update_one" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.update_one" title="invenio.modules.jsonalchemy.storage.Storage.update_one"><code class="xref py py-meth docutils literal"><span class="pre">update_one()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.engines.memory.</code><code class="descname">MemoryStorage</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement in-memory storage engine.</p>
<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.create">
<code class="descname">create</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.create" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.create" title="invenio.modules.jsonalchemy.storage.Storage.create"><code class="xref py py-meth docutils literal"><span class="pre">create()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.drop">
<code class="descname">drop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.drop" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.create" title="invenio.modules.jsonalchemy.storage.Storage.create"><code class="xref py py-meth docutils literal"><span class="pre">create()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.get_field_values">
<code class="descname">get_field_values</code><span class="sig-paren">(</span><em>ids</em>, <em>field</em>, <em>repetitive_values=True</em>, <em>count=False</em>, <em>include_recid=False</em>, <em>split_by=0</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.get_field_values" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_field_values" title="invenio.modules.jsonalchemy.storage.Storage.get_field_values"><code class="xref py py-meth docutils literal"><span class="pre">get_field_values()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.get_fields_values">
<code class="descname">get_fields_values</code><span class="sig-paren">(</span><em>ids</em>, <em>fields</em>, <em>repetitive_values=True</em>, <em>count=False</em>, <em>include_recid=False</em>, <em>split_by=0</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.get_fields_values" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_fields_values" title="invenio.modules.jsonalchemy.storage.Storage.get_fields_values"><code class="xref py py-meth docutils literal"><span class="pre">get_fields_values()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.get_many">
<code class="descname">get_many</code><span class="sig-paren">(</span><em>ids</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.get_many" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_many" title="invenio.modules.jsonalchemy.storage.Storage.get_many"><code class="xref py py-meth docutils literal"><span class="pre">get_many()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.get_one">
<code class="descname">get_one</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.get_one" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_one" title="invenio.modules.jsonalchemy.storage.Storage.get_one"><code class="xref py py-meth docutils literal"><span class="pre">get_one()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.save_many">
<code class="descname">save_many</code><span class="sig-paren">(</span><em>jsons</em>, <em>ids=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.save_many" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.save_many" title="invenio.modules.jsonalchemy.storage.Storage.save_many"><code class="xref py py-meth docutils literal"><span class="pre">save_many()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.save_one">
<code class="descname">save_one</code><span class="sig-paren">(</span><em>data</em>, <em>id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.save_one" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.save_one" title="invenio.modules.jsonalchemy.storage.Storage.save_one"><code class="xref py py-meth docutils literal"><span class="pre">save_one()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.search" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.search" title="invenio.modules.jsonalchemy.storage.Storage.search"><code class="xref py py-meth docutils literal"><span class="pre">search()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.update_many">
<code class="descname">update_many</code><span class="sig-paren">(</span><em>jsons</em>, <em>ids=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.update_many" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.update_many" title="invenio.modules.jsonalchemy.storage.Storage.update_many"><code class="xref py py-meth docutils literal"><span class="pre">update_many()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.update_one">
<code class="descname">update_one</code><span class="sig-paren">(</span><em>data</em>, <em>id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.memory.MemoryStorage.update_one" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.update_one" title="invenio.modules.jsonalchemy.storage.Storage.update_one"><code class="xref py py-meth docutils literal"><span class="pre">update_one()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.</code><code class="descname">MongoDBStorage</code><span class="sig-paren">(</span><em>model</em>, <em>**kwards</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage" title="Permalink to this definition">¶</a></dt>
<dd><p>Storage engine for MongoDB using the driver pymongo.</p>
<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.create">
<code class="descname">create</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.create" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.create" title="invenio.modules.jsonalchemy.storage.Storage.create"><code class="xref py py-meth docutils literal"><span class="pre">create()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.drop">
<code class="descname">drop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.drop" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.create" title="invenio.modules.jsonalchemy.storage.Storage.create"><code class="xref py py-meth docutils literal"><span class="pre">create()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.get_field_values">
<code class="descname">get_field_values</code><span class="sig-paren">(</span><em>ids</em>, <em>field</em>, <em>repetitive_values=True</em>, <em>count=False</em>, <em>include_id=False</em>, <em>split_by=0</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.get_field_values" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_field_values" title="invenio.modules.jsonalchemy.storage.Storage.get_field_values"><code class="xref py py-meth docutils literal"><span class="pre">get_field_values()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.get_fields_values">
<code class="descname">get_fields_values</code><span class="sig-paren">(</span><em>ids</em>, <em>fields</em>, <em>repetitive_values=True</em>, <em>count=False</em>, <em>include_id=False</em>, <em>split_by=0</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.get_fields_values" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_fields_values" title="invenio.modules.jsonalchemy.storage.Storage.get_fields_values"><code class="xref py py-meth docutils literal"><span class="pre">get_fields_values()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.get_many">
<code class="descname">get_many</code><span class="sig-paren">(</span><em>ids</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.get_many" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_many" title="invenio.modules.jsonalchemy.storage.Storage.get_many"><code class="xref py py-meth docutils literal"><span class="pre">get_many()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.get_one">
<code class="descname">get_one</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.get_one" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_one" title="invenio.modules.jsonalchemy.storage.Storage.get_one"><code class="xref py py-meth docutils literal"><span class="pre">get_one()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.save_many">
<code class="descname">save_many</code><span class="sig-paren">(</span><em>jsons</em>, <em>ids=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.save_many" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.save_many" title="invenio.modules.jsonalchemy.storage.Storage.save_many"><code class="xref py py-meth docutils literal"><span class="pre">save_many()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.save_one">
<code class="descname">save_one</code><span class="sig-paren">(</span><em>json</em>, <em>id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.save_one" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.save_one" title="invenio.modules.jsonalchemy.storage.Storage.save_one"><code class="xref py py-meth docutils literal"><span class="pre">save_one()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.search" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.search" title="invenio.modules.jsonalchemy.storage.Storage.search"><code class="xref py py-meth docutils literal"><span class="pre">search()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.update_many">
<code class="descname">update_many</code><span class="sig-paren">(</span><em>jsons</em>, <em>ids=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.update_many" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.update_many" title="invenio.modules.jsonalchemy.storage.Storage.update_many"><code class="xref py py-meth docutils literal"><span class="pre">update_many()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.update_one">
<code class="descname">update_one</code><span class="sig-paren">(</span><em>json</em>, <em>id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.mongodb_pymongo.MongoDBStorage.update_one" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.update_one" title="invenio.modules.jsonalchemy.storage.Storage.update_one"><code class="xref py py-meth docutils literal"><span class="pre">update_one()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.</code><code class="descname">SQLAlchemyStorage</code><span class="sig-paren">(</span><em>model</em>, <em>**kwards</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement database backend for SQLAlchemy model storage.</p>
<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.create">
<code class="descname">create</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.create" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.create" title="invenio.modules.jsonalchemy.storage.Storage.create"><code class="xref py py-meth docutils literal"><span class="pre">create()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.db">
<code class="descname">db</code><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.db" title="Permalink to this definition">¶</a></dt>
<dd><p>Return SQLAlchemy database object.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.drop">
<code class="descname">drop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.drop" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.create" title="invenio.modules.jsonalchemy.storage.Storage.create"><code class="xref py py-meth docutils literal"><span class="pre">create()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.get_field_values">
<code class="descname">get_field_values</code><span class="sig-paren">(</span><em>recids</em>, <em>field</em>, <em>repetitive_values=True</em>, <em>count=False</em>, <em>include_recid=False</em>, <em>split_by=0</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.get_field_values" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_field_values" title="invenio.modules.jsonalchemy.storage.Storage.get_field_values"><code class="xref py py-meth docutils literal"><span class="pre">get_field_values()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.get_fields_values">
<code class="descname">get_fields_values</code><span class="sig-paren">(</span><em>recids</em>, <em>fields</em>, <em>repetitive_values=True</em>, <em>count=False</em>, <em>include_recid=False</em>, <em>split_by=0</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.get_fields_values" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_fields_values" title="invenio.modules.jsonalchemy.storage.Storage.get_fields_values"><code class="xref py py-meth docutils literal"><span class="pre">get_fields_values()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.get_many">
<code class="descname">get_many</code><span class="sig-paren">(</span><em>ids</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.get_many" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_many" title="invenio.modules.jsonalchemy.storage.Storage.get_many"><code class="xref py py-meth docutils literal"><span class="pre">get_many()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.get_one">
<code class="descname">get_one</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.get_one" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.get_one" title="invenio.modules.jsonalchemy.storage.Storage.get_one"><code class="xref py py-meth docutils literal"><span class="pre">get_one()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.model">
<code class="descname">model</code><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.model" title="Permalink to this definition">¶</a></dt>
<dd><p>Return SQLAchemy model.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.save_many">
<code class="descname">save_many</code><span class="sig-paren">(</span><em>jsons</em>, <em>ids=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.save_many" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.save_many" title="invenio.modules.jsonalchemy.storage.Storage.save_many"><code class="xref py py-meth docutils literal"><span class="pre">save_many()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.save_one">
<code class="descname">save_one</code><span class="sig-paren">(</span><em>json</em>, <em>id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.save_one" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.save_one" title="invenio.modules.jsonalchemy.storage.Storage.save_one"><code class="xref py py-meth docutils literal"><span class="pre">save_one()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>query</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.search" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.search" title="invenio.modules.jsonalchemy.storage.Storage.search"><code class="xref py py-meth docutils literal"><span class="pre">search()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.update_many">
<code class="descname">update_many</code><span class="sig-paren">(</span><em>jsons</em>, <em>ids=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.update_many" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.update_many" title="invenio.modules.jsonalchemy.storage.Storage.update_many"><code class="xref py py-meth docutils literal"><span class="pre">update_many()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.update_one">
<code class="descname">update_one</code><span class="sig-paren">(</span><em>json</em>, <em>id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.engines.sqlalchemy.SQLAlchemyStorage.update_one" title="Permalink to this definition">¶</a></dt>
<dd><p>See <a class="reference internal" href="#invenio.modules.jsonalchemy.storage.Storage.update_one" title="invenio.modules.jsonalchemy.storage.Storage.update_one"><code class="xref py py-meth docutils literal"><span class="pre">update_one()</span></code></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="functions">
<h4>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="parsers">
<span id="id5"></span><h4>Parsers<a class="headerlink" href="#parsers" title="Permalink to this headline">¶</a></h4>
<span class="target" id="module-invenio.modules.jsonalchemy.jsonext.parsers"></span><p>JSONAlchemy parsers.</p>
<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.connect_parser.ConnectParser">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.parsers.connect_parser.</code><code class="descname">ConnectParser</code><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.connect_parser.ConnectParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles the &#64;connect decorator:</p>
<div class="highlight-python"><div class="highlight"><pre>authors:
    derived:
        @connect(&#39;creators&#39;, handler_function)
        @connect(&#39;contributors&#39; handler_function)
        self.get_list(&#39;creators&#39;) + self.get_list(contributors)
</pre></div>
</div>
<p>The handler functions will receive as parameters <code class="docutils literal"><span class="pre">self</span></code> and the current
value of the field</p>
<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.connect_parser.ConnectParser.add_info_to_field">
<em class="property">classmethod </em><code class="descname">add_info_to_field</code><span class="sig-paren">(</span><em>json_id</em>, <em>info</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.connect_parser.ConnectParser.add_info_to_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Simply returns the list with the tuples</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.connect_parser.ConnectParser.create_element">
<em class="property">classmethod </em><code class="descname">create_element</code><span class="sig-paren">(</span><em>rule</em>, <em>field_def</em>, <em>content</em>, <em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.connect_parser.ConnectParser.create_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Simply returns the list with the tuples</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.connect_parser.ConnectParser.evaluate">
<em class="property">classmethod </em><code class="descname">evaluate</code><span class="sig-paren">(</span><em>json</em>, <em>field_name</em>, <em>action</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.connect_parser.ConnectParser.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the connect funtion with json, field_name and action parameters
if any functions availabe, otherwise it will put the content of the
current field into the connected one.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.connect_parser.ConnectParser.parse_element">
<em class="property">classmethod </em><code class="descname">parse_element</code><span class="sig-paren">(</span><em>indent_stack</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.connect_parser.ConnectParser.parse_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets <code class="docutils literal"><span class="pre">connect</span></code> attribute to the rule</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.depends_on_parser.DependsOnParser">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.parsers.depends_on_parser.</code><code class="descname">DependsOnParser</code><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.depends_on_parser.DependsOnParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle the &#64;depends_on decorator:</p>
<div class="highlight-python"><div class="highlight"><pre>authors:
    derived:
        @depends_on(&#39;creators&#39;, &#39;contributors&#39;)
        self.get_list(&#39;creators&#39;) + self.get_list(contributors)
</pre></div>
</div>
<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.depends_on_parser.DependsOnParser.create_element">
<em class="property">classmethod </em><code class="descname">create_element</code><span class="sig-paren">(</span><em>rule</em>, <em>field_def</em>, <em>content</em>, <em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.depends_on_parser.DependsOnParser.create_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Just returns the list with the field names</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.depends_on_parser.DependsOnParser.evaluate">
<em class="property">classmethod </em><code class="descname">evaluate</code><span class="sig-paren">(</span><em>reader</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.depends_on_parser.DependsOnParser.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to apply the rules for each field, if it fails on one of them
returns False</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.description_parser.DescriptionParser">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.parsers.description_parser.</code><code class="descname">DescriptionParser</code><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.description_parser.DescriptionParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle the description section in model and field definitions.</p>
<div class="highlight-ini"><div class="highlight"><pre>title:
    &quot;&quot;&quot;Description on title&quot;&quot;&quot;

title:
    description:
        &quot;&quot;&quot;Description on title&quot;&quot;&quot;
</pre></div>
</div>
<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.description_parser.DescriptionParser.create_element">
<em class="property">classmethod </em><code class="descname">create_element</code><span class="sig-paren">(</span><em>rule</em>, <em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.description_parser.DescriptionParser.create_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Simply return of the string.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.description_parser.DescriptionParser.evaluate">
<em class="property">classmethod </em><code class="descname">evaluate</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.description_parser.DescriptionParser.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate parser.</p>
<p>This method is implemented like this because this parser is made for
both, fields and models, and each of them have a different signature.
Moreover this method does nothing.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.description_parser.DescriptionParser.extend_model">
<em class="property">classmethod </em><code class="descname">extend_model</code><span class="sig-paren">(</span><em>current_value</em>, <em>new_value</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.description_parser.DescriptionParser.extend_model" title="Permalink to this definition">¶</a></dt>
<dd><p>The description should remain the one from the child model.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.description_parser.DescriptionParser.inherit_model">
<em class="property">classmethod </em><code class="descname">inherit_model</code><span class="sig-paren">(</span><em>current_value</em>, <em>base_value</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.description_parser.DescriptionParser.inherit_model" title="Permalink to this definition">¶</a></dt>
<dd><p>The description should remain the one from the child model.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.description_parser.DescriptionParser.parse_element">
<em class="property">classmethod </em><code class="descname">parse_element</code><span class="sig-paren">(</span><em>indent_stack</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.description_parser.DescriptionParser.parse_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Set to the rule the description.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.</code><code class="descname">ExtensionModelParser</code><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles the extension section in the model definitions:</p>
<div class="highlight-python"><div class="highlight"><pre>fields:
    ....
    extensions:
        &#39;invenio_records.api:RecordIter&#39;
        &#39;invenio.modules.jsonalchemy.bases:Versinable&#39;
</pre></div>
</div>
<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser.add_info_to_field">
<em class="property">classmethod </em><code class="descname">add_info_to_field</code><span class="sig-paren">(</span><em>info</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser.add_info_to_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds the list of extensions to the model information</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser.create_element">
<em class="property">classmethod </em><code class="descname">create_element</code><span class="sig-paren">(</span><em>rule</em>, <em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser.create_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Simply returns the list of extensions</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser.evaluate">
<em class="property">classmethod </em><code class="descname">evaluate</code><span class="sig-paren">(</span><em>obj</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Extend the incoming object with all the new things from args</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser.extend_model">
<em class="property">classmethod </em><code class="descname">extend_model</code><span class="sig-paren">(</span><em>current_value</em>, <em>new_value</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser.extend_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Like inherit</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser.inherit_model">
<em class="property">classmethod </em><code class="descname">inherit_model</code><span class="sig-paren">(</span><em>current_value</em>, <em>base_value</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser.inherit_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Extends the list of extensions with the new ones without repeating</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser.parse_element">
<em class="property">classmethod </em><code class="descname">parse_element</code><span class="sig-paren">(</span><em>indent_stack</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.extension_model_parser.ExtensionModelParser.parse_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets <code class="docutils literal"><span class="pre">extensions</span></code> attribute to the rule definition</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.json_extra_parser.JsonExtraParser">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.parsers.json_extra_parser.</code><code class="descname">JsonExtraParser</code><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.json_extra_parser.JsonExtraParser" title="Permalink to this definition">¶</a></dt>
<dd><p>JSON extension.</p>
<p>It parses something like this:</p>
<div class="highlight-python"><div class="highlight"><pre>json:
    loads, function_to_load(field)
    dumps, function_to_dump(field)
</pre></div>
</div>
<p>The functions to load and dump must have one parameter which is the field
to parse.</p>
<p>The main purpose of this extensions is to be able to work inside the JSON
object with non JSON fields, such as dates.
Following the example of dates, the load function will take a string
representing a date and transform it into a <cite>datetime</cite> object, whereas the
dumps function should take this object an create a JSON friendly
representation, usually <cite>datetime.isoformat</cite>.</p>
<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.json_extra_parser.JsonExtraParser.add_info_to_field">
<em class="property">classmethod </em><code class="descname">add_info_to_field</code><span class="sig-paren">(</span><em>json_id</em>, <em>rule</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.json_extra_parser.JsonExtraParser.add_info_to_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Add to the field definition the path to get the json functions.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.json_extra_parser.JsonExtraParser.create_element">
<em class="property">classmethod </em><code class="descname">create_element</code><span class="sig-paren">(</span><em>rule</em>, <em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.json_extra_parser.JsonExtraParser.create_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the dictionary with the dump and load functions.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.json_extra_parser.JsonExtraParser.evaluate">
<em class="property">classmethod </em><code class="descname">evaluate</code><span class="sig-paren">(</span><em>json</em>, <em>field_name</em>, <em>action</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.json_extra_parser.JsonExtraParser.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate the dumps and loads functions depending on the action.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.json_extra_parser.JsonExtraParser.parse_element">
<em class="property">classmethod </em><code class="descname">parse_element</code><span class="sig-paren">(</span><em>indent_stack</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.json_extra_parser.JsonExtraParser.parse_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Set <code class="docutils literal"><span class="pre">json_ext</span></code> in the rule.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.legacy_parser.LegacyParser">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.parsers.legacy_parser.</code><code class="descname">LegacyParser</code><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.legacy_parser.LegacyParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle the <code class="docutils literal"><span class="pre">&#64;legacy</span></code> decorator.</p>
<div class="highlight-ini"><div class="highlight"><pre>doi:
    creator:
        @legacy(((&quot;024&quot;, &quot;0247_&quot;, &quot;0247_%&quot;), &quot;&quot;),
                (&quot;0247_a&quot;, &quot;&quot;))
        marc, &quot;0247_&quot;, get_doi(value)


files:
    calculated:
         @legacy(&#39;marc&#39;, (&quot;8564_z&quot;, &quot;comment&quot;),
                 (&quot;8564_y&quot;, &quot;caption&quot;, &quot;description&quot;),
                 (&quot;8564_q&quot;, &quot;eformat&quot;),
                 (&quot;8564_f&quot;, &quot;name&quot;),
                 (&quot;8564_s&quot;, &quot;size&quot;),
                 (&quot;8564_u&quot;, &quot;url&quot;, &quot;url&quot;)
                )
        @parse_first((&#39;recid&#39;, ))
        {&#39;url&#39;: &#39;http://example.org&#39;}
</pre></div>
</div>
<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.legacy_parser.LegacyParser.create_element">
<em class="property">classmethod </em><code class="descname">create_element</code><span class="sig-paren">(</span><em>rule</em>, <em>field_def</em>, <em>content</em>, <em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.legacy_parser.LegacyParser.create_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Special case of decorator.</p>
<p>It creates the legacy rules dictionary and it doesn&#8217;t have any effect
to the field definitions:</p>
<div class="highlight-python"><div class="highlight"><pre>{&#39;100&#39;   : [&#39;authors[0]&#39;],
 &#39;100__&#39; : [&#39;authors[0]&#39;],
 &#39;100__%&#39;: [&#39;authors[0]&#39;],
 &#39;100__a&#39;: [&#39;authors[0].full_name&#39;],
 .......
}
</pre></div>
</div>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.legacy_parser.LegacyParser.evaluate">
<em class="property">classmethod </em><code class="descname">evaluate</code><span class="sig-paren">(</span><em>value</em>, <em>namespace</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.legacy_parser.LegacyParser.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate parser.</p>
<p>This is a special case where the real evaluation of the decorator
happened before the evaluation.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.memoize_parser.MemoizeParser">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.parsers.memoize_parser.</code><code class="descname">MemoizeParser</code><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.memoize_parser.MemoizeParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle the <code class="docutils literal"><span class="pre">&#64;memoze</span></code> decorator.</p>
<div class="highlight-ini"><div class="highlight"><pre>number_of_comments:
    calculated:
        @memoize(300)
        get_number_of_comments(self[&#39;recid&#39;])
</pre></div>
</div>
<p>This decorator works only with calculated fields and it has three different
ways of doing it:</p>
<ol class="arabic simple">
<li>No decorator is specified, the value of the field will be calculated
every time that somebody asks for it and its value will not be stored
in the DB. This way is useful to create fields that return objects
that can&#8217;t be stored in the DB in a JSON friendly manner or a field
that changes a lot its value and the calculated function is really
light.</li>
<li>The decorator is used without any time, <code class="docutils literal"><span class="pre">&#64;memoize()</span></code>. This means
that the value of the field is calculated when the record is created,
it is stored in the DB and it is the job of the client that modifies
the data, which is used to calculated the field, to update the field
value in the DB.
This way should be used for fields that are typically updated just by
a few clients, like <code class="docutils literal"><span class="pre">bibupload</span></code>, <code class="docutils literal"><span class="pre">bibrank</span></code>, etc.</li>
<li>A lifetime is set with the decorator <code class="docutils literal"><span class="pre">&#64;memoize(300)</span></code>. In this case
the field value is only calculated when somebody asks for it and its
value is stored in a general cache (<code class="docutils literal"><span class="pre">invenio.ext.cache</span></code>) using the
timeout from the decorator.
This form of the memoize decorator should be used with a field that
changes a lot its value and the function to calculate it is not
light.
Keep in mind that the value that someone might get could be
outdated. To avoid this situation the client that modifies the data
where the value is calculated from could also invalidate the cache or
modify the cached value.
One good example of the use of it is the field <code class="docutils literal"><span class="pre">number_of_comments</span></code></li>
</ol>
<p>The cache engine used by this decorator could be set using
<code class="docutils literal"><span class="pre">CFG_JSONALCHEMY_CACHE</span></code> in your instance configuration, by default
<code class="docutils literal"><span class="pre">invenio.ext.cache:cache</span></code> will use.
<code class="docutils literal"><span class="pre">CFG_JSONALCHEMY_CACHE</span></code> must be and importable string pointing to the
cache object.</p>
<dl class="attribute">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.memoize_parser.MemoizeParser.DEFAULT_TIMEOUT">
<code class="descname">DEFAULT_TIMEOUT</code><em class="property"> = -1</em><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.memoize_parser.MemoizeParser.DEFAULT_TIMEOUT" title="Permalink to this definition">¶</a></dt>
<dd><p>Default timeout, -1 means the cache will not be invalidated unless is
explicitly requested</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.memoize_parser.MemoizeParser.add_info_to_field">
<em class="property">classmethod </em><code class="descname">add_info_to_field</code><span class="sig-paren">(</span><em>json_id</em>, <em>info</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.memoize_parser.MemoizeParser.add_info_to_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the time out for the field</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.memoize_parser.MemoizeParser.create_element">
<em class="property">classmethod </em><code class="descname">create_element</code><span class="sig-paren">(</span><em>rule</em>, <em>field_def</em>, <em>content</em>, <em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.memoize_parser.MemoizeParser.create_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to evaluate the memoize value to int.</p>
<p>If it fails it sets the default value from <code class="docutils literal"><span class="pre">DEFAULT_TIMEOUT</span></code>.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.memoize_parser.MemoizeParser.evaluate">
<em class="property">classmethod </em><code class="descname">evaluate</code><span class="sig-paren">(</span><em>json</em>, <em>field_name</em>, <em>action</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.memoize_parser.MemoizeParser.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate the parser.</p>
<p>When getting a json field compare the timestamp and the lifetime of it
and, if it the lifetime is over calculate its value again.</p>
<p>If the value of the field has changed since the last time it gets
updated in the DB.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.memoize_parser.MemoizeParser.parse_element">
<em class="property">classmethod </em><code class="descname">parse_element</code><span class="sig-paren">(</span><em>indent_stack</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.memoize_parser.MemoizeParser.parse_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Set <code class="docutils literal"><span class="pre">memoize</span></code> attribute to the rule.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.only_if_master_value_parser.OnlyIfMasterValueParser">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.parsers.only_if_master_value_parser.</code><code class="descname">OnlyIfMasterValueParser</code><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.only_if_master_value_parser.OnlyIfMasterValueParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle the <code class="docutils literal"><span class="pre">&#64;only_if_master_value</span></code> decorator.</p>
<div class="highlight-ini"><div class="highlight"><pre>files_to_upload:
    creator:
        @only_if_value(is_local_url(value[&#39;u&#39;]),
                       is_available_url(value[&#39;u&#39;]))
        marc, &quot;8564_&quot;, {&#39;hots_name&#39;: value[&#39;a&#39;],
                        &#39;access_number&#39;: value[&#39;b&#39;],
                ........
</pre></div>
</div>
<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.only_if_master_value_parser.OnlyIfMasterValueParser.create_element">
<em class="property">classmethod </em><code class="descname">create_element</code><span class="sig-paren">(</span><em>rule</em>, <em>field_def</em>, <em>content</em>, <em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.only_if_master_value_parser.OnlyIfMasterValueParser.create_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Simply return the list of boolean expressions.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.only_if_master_value_parser.OnlyIfMasterValueParser.evaluate">
<em class="property">classmethod </em><code class="descname">evaluate</code><span class="sig-paren">(</span><em>value</em>, <em>namespace</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.only_if_master_value_parser.OnlyIfMasterValueParser.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate <code class="docutils literal"><span class="pre">args</span></code> with the master value from the input.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a boolean depending on evaluated <code class="docutils literal"><span class="pre">value</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.only_if_master_value_parser.OnlyIfMasterValueParser.parse_element">
<em class="property">classmethod </em><code class="descname">parse_element</code><span class="sig-paren">(</span><em>indent_stack</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.only_if_master_value_parser.OnlyIfMasterValueParser.parse_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Set <code class="docutils literal"><span class="pre">only_if_master_value</span></code> attribute to the rule.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.only_if_parser.OnlyIfParser">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.parsers.only_if_parser.</code><code class="descname">OnlyIfParser</code><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.only_if_parser.OnlyIfParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle the <code class="docutils literal"><span class="pre">&#64;only_if</span></code> decorator.</p>
<div class="highlight-ini"><div class="highlight"><pre>number_of_copies:
    creator:
        @only_if(&#39;BOOK&#39; in self.get(&#39;collection.primary&#39;, []))
        get_number_of_copies(self.get(&#39;recid&#39;))
</pre></div>
</div>
<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.only_if_parser.OnlyIfParser.evaluate">
<em class="property">classmethod </em><code class="descname">evaluate</code><span class="sig-paren">(</span><em>reader</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.only_if_parser.OnlyIfParser.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate parser.</p>
<p>This is a special case where the real evaluation of the decorator
is happening before the evaluation.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.parse_first_parser.ParseFirstParser">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.parsers.parse_first_parser.</code><code class="descname">ParseFirstParser</code><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.parse_first_parser.ParseFirstParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle the <code class="docutils literal"><span class="pre">&#64;parse_first</span></code> decorator.</p>
<div class="highlight-ini"><div class="highlight"><pre>author_aggregation:
    derived:
        @parse_first(&#39;creators&#39;, &#39;contributors&#39;)
        self.get_list(&#39;creators&#39;) + self.get_list(contributors)
</pre></div>
</div>
<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.parse_first_parser.ParseFirstParser.evaluate">
<em class="property">classmethod </em><code class="descname">evaluate</code><span class="sig-paren">(</span><em>reader</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.parse_first_parser.ParseFirstParser.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to parse <code class="docutils literal"><span class="pre">args</span></code> first and return always <code class="docutils literal"><span class="pre">True</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.producer_parser.ProducerParser">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.parsers.producer_parser.</code><code class="descname">ProducerParser</code><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.producer_parser.ProducerParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles the producer section from a field definition.</p>
<p>An example of this section could be:</p>
<div class="highlight-python"><div class="highlight"><pre>recid:
    producer:
        json_for_marc(), {&#39;001&#39;: &#39;&#39;}

title:
    producer:
        json_for_marc(), {&#39;a&#39;: &#39;title&#39;}

creator:
    producer:
        json_for_marc(&#39;100__&#39;), {....}
        json_for_marc(&#39;1001_&#39;), {....}
        json_for_marc(&#39;100[^1][^_]&#39;), {....}
</pre></div>
</div>
<p>The parameter passed to the producer could be used by the producer for
example to decide if the current producer rule will be applied depending
on the tag from the master format. Typically is a string or a <cite>regex</cite> but
it should be double check with the producer implementation.</p>
<p>To view the list of possible producer, check the <cite>producer</cite> folder inside
jsonext or simply:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">invenio.modules.jsonalchemy.registry</span> <span class="kn">import</span> <span class="n">producers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">producers</span><span class="p">)</span>
</pre></div>
</div>
<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.producer_parser.ProducerParser.create_element">
<em class="property">classmethod </em><code class="descname">create_element</code><span class="sig-paren">(</span><em>rule</em>, <em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.producer_parser.ProducerParser.create_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare the list of producers with their names and parameters.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.producer_parser.ProducerParser.parse_element">
<em class="property">classmethod </em><code class="descname">parse_element</code><span class="sig-paren">(</span><em>indent_stack</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.producer_parser.ProducerParser.parse_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Set. to the rule the list of producers in <code class="docutils literal"><span class="pre">producer</span></code> attribute.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.schema_parser.SchemaParser">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.parsers.schema_parser.</code><code class="descname">SchemaParser</code><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.schema_parser.SchemaParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the schema definitions for fields, using cerberus.</p>
<div class="highlight-ini"><div class="highlight"><pre>modification_date:
    schema:
        {&#39;modification_date&#39;: {
            &#39;type&#39;: &#39;datetime&#39;,
            &#39;required&#39;: True,
            &#39;default&#39;: lambda: __import__(&#39;datetime&#39;).datetime.now()}}
</pre></div>
</div>
<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.schema_parser.SchemaParser.create_element">
<em class="property">classmethod </em><code class="descname">create_element</code><span class="sig-paren">(</span><em>rule</em>, <em>namespace</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.schema_parser.SchemaParser.create_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Just evaluate the content of the schema to a python dictionary.</p>
</dd></dl>

<dl class="classmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.parsers.schema_parser.SchemaParser.parse_element">
<em class="property">classmethod </em><code class="descname">parse_element</code><span class="sig-paren">(</span><em>indent_stack</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.parsers.schema_parser.SchemaParser.parse_element" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the <code class="docutils literal"><span class="pre">schema</span></code> attribute inside the rule.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="producers">
<h4>Producers<a class="headerlink" href="#producers" title="Permalink to this headline">¶</a></h4>
<div class="section" id="module-invenio.modules.jsonalchemy.jsonext.producers.json_for_marc">
<span id="id6"></span><span id="json-for-marc"></span><h5>JSON for MARC<a class="headerlink" href="#module-invenio.modules.jsonalchemy.jsonext.producers.json_for_marc" title="Permalink to this headline">¶</a></h5>
<p>MARC formatted as JSON producer.</p>
<p>This producer could be used in several ways.</p>
<p>It could preserve the input tag from marc:</p>
<div class="highlight-python"><div class="highlight"><pre>title:
    ...
    producer:
        json_for_marc(), {&#39;a&#39;: &#39;title&#39;}
</pre></div>
</div>
<p>It will output the old marc tag followed by the subfield (dictionary key) and
the value of this key will be json[&#8216;title&#8217;][&#8216;title&#8217;]
For example:</p>
<div class="highlight-python"><div class="highlight"><pre>...
&lt;datafield tag=&quot;245&quot; ind1=&quot;1&quot; ind2=&quot;2&quot;&gt;
  &lt;subfield code=&quot;a&quot;&gt;Awesome title&lt;/subfield&gt;
&lt;/datafield&gt;
...
</pre></div>
</div>
<p>Will produce:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;24512a&#39;</span><span class="p">:</span> <span class="s">&#39;Awesome title&#39;</span><span class="p">},</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>Also could also unify the input marc:</p>
<div class="highlight-python"><div class="highlight"><pre>title:
    ...
    producer:
        json_for_marc(), {&#39;245__a&#39;: &#39;title&#39;}
</pre></div>
</div>
<p>Using the same example as before it will produce:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;245__a&#39;</span><span class="p">:</span> <span class="s">&#39;Awesome title&#39;</span><span class="p">},</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>The third way of using it is to create different outputs depending of the input
tag. Lets say this time we have this field definition:</p>
<div class="highlight-python"><div class="highlight"><pre>title:
    ...
    producer:
        json_for_marc(&#39;24511&#39;), {&#39;a&#39;: &#39;title&#39;}
        json_for_marc(&#39;245__&#39;), {&#39;a&#39;: &#39;title&#39;, &#39;b&#39;: &#39;subtitle&#39;}
</pre></div>
</div>
<p>The previous piece of MARC will produce the same output as before:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;24512a&#39;</span><span class="p">:</span> <span class="s">&#39;Awesome title&#39;</span><span class="p">},</span> <span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>But if we use this one:</p>
<div class="highlight-python"><div class="highlight"><pre>...
&lt;datafield tag=&quot;245&quot; ind1=&quot; &quot; ind2=&quot; &quot;&gt;
  &lt;subfield code=&quot;a&quot;&gt;Awesome title&lt;/subfield&gt;
  &lt;subfield code=&quot;b&quot;&gt;Awesome subtitle&lt;/subfield&gt;
&lt;/datafield&gt;
...
</pre></div>
</div>
<p>This will produce:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;245__a&#39;</span><span class="p">:</span> <span class="s">&#39;Awesome title&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s">&#39;245__b&#39;</span><span class="p">:</span> <span class="s">&#39;Awesome subtitle&#39;</span><span class="p">},</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>This last approach should be used carefully as all the rules are applied,
therefore the rules should not overlap (unless this is the desired behavior).</p>
<dl class="function">
<dt id="invenio.modules.jsonalchemy.jsonext.producers.json_for_marc.produce">
<code class="descclassname">invenio.modules.jsonalchemy.jsonext.producers.json_for_marc.</code><code class="descname">produce</code><span class="sig-paren">(</span><em>self</em>, <em>fields=None</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.producers.json_for_marc.produce" title="Permalink to this definition">¶</a></dt>
<dd><p>Export the json in marc format.</p>
<p>Produces a list of dictionaries will all the possible marc tags as keys.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fields</strong> &#8211; list of fields to include in the output, if None or
empty list all available tags will be included.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="id7">
<h4>Readers<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.readers.json_reader.JsonReader">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.readers.json_reader.</code><code class="descname">JsonReader</code><span class="sig-paren">(</span><em>json</em>, <em>blob=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.readers.json_reader.JsonReader" title="Permalink to this definition">¶</a></dt>
<dd><p>JSON reader.</p>
<dl class="staticmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.readers.json_reader.JsonReader.split_blob">
<em class="property">static </em><code class="descname">split_blob</code><span class="sig-paren">(</span><em>blob</em>, <em>schema=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.readers.json_reader.JsonReader.split_blob" title="Permalink to this definition">¶</a></dt>
<dd><p>In case of several objs inside the blob this method specify how to
split then and work one by one afterwards.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="invenio.modules.jsonalchemy.jsonext.readers.marc_reader.MarcReader">
<em class="property">class </em><code class="descclassname">invenio.modules.jsonalchemy.jsonext.readers.marc_reader.</code><code class="descname">MarcReader</code><span class="sig-paren">(</span><em>json</em>, <em>blob=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.readers.marc_reader.MarcReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Marc reader.</p>
<dl class="method">
<dt id="invenio.modules.jsonalchemy.jsonext.readers.marc_reader.MarcReader.guess_model_from_input">
<code class="descname">guess_model_from_input</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.readers.marc_reader.MarcReader.guess_model_from_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Guess from the input Marc the model to be used in this record.</p>
<p>This is the simplest implementation possible, it just take all <cite>980__a</cite>
tags and sets it as list of models.
The guess function could be easily change by setting
<cite>CFG_MARC_MODEL_GUESSER</cite> with an importable string</p>
</dd></dl>

<dl class="staticmethod">
<dt id="invenio.modules.jsonalchemy.jsonext.readers.marc_reader.MarcReader.split_blob">
<em class="property">static </em><code class="descname">split_blob</code><span class="sig-paren">(</span><em>blob</em>, <em>schema=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#invenio.modules.jsonalchemy.jsonext.readers.marc_reader.MarcReader.split_blob" title="Permalink to this definition">¶</a></dt>
<dd><p>Split the blob using &lt;record.*?&gt;.*?&lt;/record&gt; as pattern.</p>
<p>Note 1: Taken from invenio.legacy.bibrecord:create_records
Note 2: Use the DOTALL flag to include newlines.</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="knowledge.html" class="btn btn-neutral float-right" title="Knowledge" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="formatter.html" class="btn btn-neutral" title="Formatter" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, 2014, 2015 CERN.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.2.0.dev20150608',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>