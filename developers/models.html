

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Models &mdash; Invenio 2.2.0.dev20150608 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
    <link rel="top" title="Invenio 2.2.0.dev20150608 documentation" href="../index.html"/>
        <link rel="up" title="Developerâ€™s Guide" href="index.html"/>
        <link rel="next" title="Modules" href="modules.html"/>
        <link rel="prev" title="Pluggable Objects" href="registries.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> Invenio
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/introduction.html">Introduction to Invenio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/introduction.html#what-is-a-registry">What is a Registry?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/introduction.html#what-do-i-need">What do I need?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/introduction.html#get-started">Get Started</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/quickstart.html">Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/demo.html">Demo and Example Sites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/demo.html#demo-sites">Demo Sites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/demo.html#production-sites">Production Sites</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/features.html">Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/features.html#navigable-collection-tree">Navigable collection tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/features.html#powerful-search-engine">Powerful search engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/features.html#flexible-metadata">Flexible metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/features.html#user-personalization">User personalization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/features.html#multiple-output-formats">Multiple output formats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/first-steps.html">First Steps with Invenio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/first-steps.html#about">1. About</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/first-steps.html#prerequisites">2. Prerequisites</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/first-steps.html#debian-ubuntu-lts">2.1. Debian / Ubuntu LTS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/first-steps.html#centos-rhel">2.2. Centos / RHEL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/first-steps.html#os-x">2.3. OS X</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/first-steps.html#extra-tools">2.4. Extra tools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/first-steps.html#quick-instructions-for-the-impatient-invenio-developer">3. Quick instructions for the impatient Invenio developer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/first-steps.html#installation">3.1. Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/first-steps.html#configuration">3.2. Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/first-steps.html#development">3.3. Development</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/first-steps.html#final-words">4. Final words</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/overlay.html">How to create an Invenio overlay</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overlay.html#what-is-an-overlay">What is an overlay</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overlay.html#creating-your-first-invenio-overlay">Creating your first Invenio overlay</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#the-global-setup">The global setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#the-virtual-environment">The virtual environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#the-base-of-the-overlay">The base of the overlay</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overlay.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#sensitive-configuration">Sensitive configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#database-setup">Database setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#assets">Assets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overlay.html#running">Running</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overlay.html#translations">Translations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#id1">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#message-extraction">Message Extraction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#create-catalog-for-new-language">Create Catalog for New Language</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#compiling-catalog">Compiling Catalog</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#updating-strings">Updating Strings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overlay.html#deployment">Deployment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#preparing-the-tarball">Preparing the tarball</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#creating-the-virtual-environement">Creating the virtual environement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#installing-the-package">Installing the package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#id2">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#running-the-server">Running the server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overlay.html#dealing-with-versions">Dealing with versions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/common-concepts.html">Common Concepts</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer&#8217;s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introducing Invenio for Developers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#extensions">Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#modules">Modules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="extensions.html">Extensions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="extensions.html#plugging-an-existing-extension">Plugging an Existing Extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="extensions.html#code-structure">Code structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="registries.html">Pluggable Objects</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#code-structure">Code structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#quering">Quering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#subqueries">Subqueries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#schema">Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="#improve-code-readability">Improve code readability</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="modules.html#views">Views</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="howtomodule.html">How to develop a module: Part 1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="howtomodule.html#overview">Overview</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="howtomodulepart2.html">How to develop a module: Part 2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="howtomodulepart2.html#multiple-views">Multiple views</a></li>
<li class="toctree-l3"><a class="reference internal" href="howtomodulepart2.html#module-wide-configuration">Module-wide configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="howtomodulepart3.html">How to develop a module: Part 3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="howtomodulepart3.html#tests">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="howtomodulepart3.html#documentation">Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="templates.html">Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="git-workflow.html">Git Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="git-workflow.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="git-workflow.html#setting-things-up">Setting things up</a><ul>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#s1-setting-up-your-git-identity">S1. Setting up your Git identity</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#s2-setting-up-your-private-repo">S2. Setting up your private repo</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#s3-backuping-your-private-repo-only-developers-at-cern">S3. Backuping your private repo (only developers at CERN)</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#s4-setting-up-your-public-repo">S4. Setting up your public repo</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#s5-pushing-to-your-public-repo-from-outside-cern">S5. Pushing to your public repo from outside CERN</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#s6-making-your-public-repo-visible-on-the-web">S6. Making your public repo visible on the Web</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#s7-using-remote-repository-locally">S7. Using remote repository locally</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="git-workflow.html#understanding-official-repo-branches">Understanding official repo branches</a><ul>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#maint"><code class="docutils literal"><span class="pre">maint</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#master"><code class="docutils literal"><span class="pre">master</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#next"><code class="docutils literal"><span class="pre">next</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="git-workflow.html#working-on-new-features-overview">Working on new features - overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="git-workflow.html#working-on-new-features-details">Working on new features - details</a><ul>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#w1-cloning-the-repo">W1. Cloning the repo</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#w2-working-with-local-topic-branches">W2. Working with local topic branches</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#w3-working-on-new-feature-b">W3. Working on new-feature-b</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#w4-using-temporary-stash">W4. Using temporary stash</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#w5-testing-on-dev-servers">W5. Testing on DEV servers</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#w6-rebasing-against-latest-git-master">W6. Rebasing against latest git/master</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#w7-publishing-your-work">W7. Publishing your work</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#w8-review-process">W8. Review process</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="git-workflow.html#remarks-often-made-during-code-review">Remarks often made during code review</a><ul>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#r1-remarks-on-commit-history">R1. Remarks on commit history</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#r2-remarks-on-commit-log-messages">R2. Remarks on commit log messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#r3-remarks-on-the-coding">R3. Remarks on the coding</a></li>
<li class="toctree-l4"><a class="reference internal" href="git-workflow.html#r4-notes-on-the-review-process-timeline">R4. Notes on the review process timeline</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="kwalitee.html">Commit quality check</a></li>
<li class="toctree-l2"><a class="reference internal" href="patterns.html">Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker.html">Docker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="docker.html#setup">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="docker.html#interactive-sessions">Interactive sessions</a></li>
<li class="toctree-l3"><a class="reference internal" href="docker.html#debugging">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="docker.html#code-changes-and-live-reloading">Code changes and live reloading</a></li>
<li class="toctree-l3"><a class="reference internal" href="docker.html#building-documentation">Building documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="docker.html#running-tests">Running tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="docker.html#overlays">Overlays</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Admin&#8217;s Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibauthority-admin-guide.html">BibAuthority Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibauthority-admin-guide.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibauthority-admin-guide.html#enforcing-types-of-authority-records">Enforcing types of authority records</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibauthority-admin-guide.html#bibedit">BibEdit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibauthority-admin-guide.html#bibindex">BibIndex</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibauthority-admin-guide.html#configuration-file-overview">Configuration File Overview</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibclassify-admin-guide.html">BibClassify Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibclassify-admin-guide.html#overview">1. Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibclassify-admin-guide.html#thesaurus">1.1 Thesaurus</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibclassify-admin-guide.html#keyword-extraction">1.2 Keyword extraction</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibclassify-admin-guide.html#running-bibclassify">2. Running BibClassify</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibconvert-admin-guide.html">BibConvert Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#a-overview">A. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#b-xml-oriented-mode">B. XML-Oriented Mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#configuration-file-examples">1. Configuration File Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#running-bibconvert">2. Running BibConvert</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#c-plain-text-oriented-mode">C. Plain Text-Oriented Mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#id2">1. Configuration File Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#id3">2. Running BibConvert</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibconvert-admin-guide.html#bibconvert-configuration-guide">3. BibConvert Configuration Guide</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibedit-admin-guide.html">BibEdit Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibedit-admin-guide.html#overview">1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibedit-admin-guide.html#edit-records-via-web-interface">2. Edit records via Web interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibedit-admin-guide.html#keyboard-shortcuts-on-bibedit">2.1 Keyboard shortcuts on BibEdit</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibedit-admin-guide.html#edit-multiple-records-via-web-interface">3. Edit multiple records via web interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibedit-admin-guide.html#multi-record-editor-user-guide">3.1 Multi-Record Editor user guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibedit-admin-guide.html#edit-records-via-command-line">4. Edit records via command line</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibedit-admin-guide.html#delete-records-via-command-line">5. Delete records via command line</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibedit-admin-guide.html#delete-all-records">6. Delete all records</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibedit-admin-guide.html#access-record-history">7. Access record history</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html">BibKnowledge Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#contents">Contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#overview">1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#configure-knowledge-bases">2. Configure Knowledge Bases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#add-a-knowledge-base">2.1 Add a Knowledge Base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#remove-a-knowledge-base">2.2 Remove a Knowledge Base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#add-a-mapping">2.3 Add a Mapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#remove-a-mapping">2.4 Remove a Mapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#edit-a-mapping">2.5 Edit a Mapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibknowledge-admin-guide.html#edit-the-attributes-of-a-knowledge-base">2.6 Edit the Attributes of a Knowledge Base</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibmatch-admin-guide.html">BibMatch Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#overview">1. Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#what-is-bibmatch">1.1 What is BibMatch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#features">1.2 Features</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#usage">2. Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#basic-usage">2.1 Basic usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#advanced-usage">2.2 Advanced usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#more-examples">3. More examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#id2">3.1 More examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#appendix">Appendix</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#a-querystrings">A. Querystrings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#b-bibconvert-formats">B. BibConvert formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#c-predefined-fields">C. Predefined fields</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibmatch-admin-guide.html#d-bibmatch-commmand-line-tool">D. BibMatch commmand-line tool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibsched-admin-guide.html">BibSched Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#bibsched-graphical-interface">Bibsched graphical interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibsched-admin-guide.html#manual-mode">Manual mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibsched-admin-guide.html#automatic-mode">Automatic mode</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#bibsched-maintenance">Bibsched maintenance</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#priorities">Priorities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#task-logging">Task logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#task-concurrency">Task concurrency</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#bibsched-command-line-interface">Bibsched command line interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#bibtasks-command-line-interface">Bibtasks command line interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibsched-admin-guide.html#bibsched-tasklets">BibSched Tasklets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/bibupload-admin-guide.html">BibUpload Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibupload-admin-guide.html#overview">1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibupload-admin-guide.html#configuring-bibupload">2. Configuring BibUpload</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibupload-admin-guide.html#running-bibupload">3. Running BibUpload</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#inserting-new-records">3.1 Inserting new records</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#inserting-records-into-the-holding-pen">3.2 Inserting records into the Holding Pen</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#updating-existing-records">3.3 Updating existing records</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#inserting-and-updating-at-the-same-time">3.4 Inserting and updating at the same time</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#obtaining-feedbacks">3.7 Obtaining feedbacks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#assigning-additional-information-to-documents-and-other-entities">3.8 Assigning additional information to documents and other entities</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/bibupload-admin-guide.html#batch-uploader">4. Batch Uploader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#web-interface-cataloguers">4.1 Web interface - Cataloguers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#web-interface-robots">4.2 Web interface - Robots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/bibupload-admin-guide.html#daemon-mode">4.2 Daemon mode</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/docextract-admin-guide.html">DocExtract Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/oaiharvest-admin-guide.html">OAIHarvest Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/oaiharvest-admin-guide.html#overview">1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/oaiharvest-admin-guide.html#oai-data-harvesting">2. OAI Data Harvesting</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/oaiharvest-admin-guide.html#oai-harvest-admin-interface">2.1 OAI Harvest Admin Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/oaiharvest-admin-guide.html#oaiharvest-commmand-line-tool">2.2 oaiharvest commmand-line tool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/oairepository-admin-guide.html">OAIRepository Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/oairepository-admin-guide.html#overview">1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/oairepository-admin-guide.html#oai-repository-exporting">2. OAI Repository (<em>Exporting</em>)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/oairepository-admin-guide.html#definition-of-oai-sets">2.1. Definition of OAI sets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/oairepository-admin-guide.html#exposing-metadata-via-oai-repository-gateway">2.2. Exposing metadata via OAI Repository Gateway</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/publiline-admin-guide.html">Publiline Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/publiline-admin-guide.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/publiline-admin-guide.html#configure-publiline">Configure Publiline</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/publiline-admin-guide.html#step-1-define-a-publication-committee-chair">Step 1 : Define a Publication Committee Chair</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/publiline-admin-guide.html#step-2-create-a-group">Step 2 : Create a Group</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/publiline-admin-guide.html#step-3-define-project-leader-s">Step 3 : Define Project Leader(s)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/publiline-admin-guide.html#overview-and-usage">Overview and usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/webmessage-admin-guide.html">WebMessage Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../admin/websession-admin-guide.html">WebSession Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/websession-admin-guide.html#guest-user-sessions">Guest User Sessions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../admin/webstyle-admin-guide.html">WebStyle Admin Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../admin/webstyle-admin-guide.html#contents">Contents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../admin/webstyle-admin-guide.html#overview">1. Overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#css-style-sheet-and-images">1.1 CSS Style Sheet and Images</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#html-page-layout">1.2 HTML Page Layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#look-of-bibliographic-references">1.3 Look of Bibliographic References</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#specific-configurations">1.4 Specific Configurations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../admin/webstyle-admin-guide.html#detailed-record-pages">2. Detailed Record Pages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#available-tabs">2.1 Available tabs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#showing-hiding-tabs">2.2 Showing/Hiding tabs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#customizing-content-of-tabs">2.3 Customizing content of tabs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#customizing-look-of-tabs">2.4 Customizing look of tabs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#custom-redirections">Custom Redirections</a></li>
<li class="toctree-l4"><a class="reference internal" href="../admin/webstyle-admin-guide.html#command-line-interface">Command Line Interface</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../base.html">Base</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../base.html#invenio-base">invenio.base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../base.html#module-invenio.base.wrappers">Wrappers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../base.html#module-invenio.base.factory">Factory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../base.html#module-invenio.base.bundles">Bundles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#extensions">Extensions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ext/assets.html">Assets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/assets.html#module-invenio.ext.assets.commands">Flask-Script commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/assets.html#module-invenio.ext.assets.extensions">Jinja2 extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/assets.html#module-invenio.ext.assets.registry">Registry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/assets.html#module-invenio.ext.assets.wrappers">Wrappers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/arxiv.html">ArXiv</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/arxiv.html#configuration-settings">Configuration Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/crossref.html">CrossRef</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/crossref.html#configuration-settings">Configuration Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/es.html">Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ext/fs.html">Cloud Filesystems</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/fs.html#dropbox">Dropbox</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/fs.html#google-drive">Google Drive</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/jasmine.html">Jasmine</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/jasmine.html#missing-features">Missing features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/jasmine.html#flightjs-tests">FlightJS tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/jasmine.html#fixtures">Fixtures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/jasmine.html#howto">HOWTO</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/logging.html">Logging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/logging.html#logging-errors">Logging errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/logging.html#log-handlers">Log handlers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/logging.html#legacy-handling-of-errors">Legacy handling of errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/logging.html#error-handling-do-s-and-don-ts">Error handling do&#8217;s and don&#8217;ts</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/logging.html#backends">Backends</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/login.html">Login</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/login.html#module-invenio.ext.login">invenio.ext.login package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/login.html#module-invenio.ext.login.legacy_user">invenio.ext.login.legacy_user module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/passlib.html">Passlib</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/passlib.html#configuration-settings">Configuration Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/script.html">Script</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/script.html#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/session.html">Session</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/session.html#module-invenio.ext.session.backends">Backends</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/session.html#module-invenio.ext.session.interface">Wrappers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ext/sqlalchemy.html">SQLAlchemy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ext/template.html">Templates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ext/template.html#module-invenio.ext.template.extensions">Jinja2 extensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/template.html#module-invenio.ext.template.config">Config</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/template.html#module-invenio.ext.template.loader">Loader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/template.html#module-invenio.ext.template.bccache">BCCache</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ext/template.html#module-invenio.ext.template.context_processor">Context Processor</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#modules">Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../modules/annotations.html">Annotations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../modules/annotations.html#invenio-modules-annotations">invenio.modules.annotations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/annotations.html#module-invenio.modules.annotations.models">Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/annotations.html#module-invenio.modules.annotations.noteutils">Noteutils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/annotations.html#module-invenio.modules.annotations.views">Views</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../modules/apikeys.html">API Keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules/documentation.html">Documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../modules/documentation.html#module-invenio.modules.documentation.config">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/documentation.html#module-invenio.modules.documentation.views">Views</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../modules/documents.html">Documents</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../modules/documents.html#invenio-modules-documents-api">invenio.modules.documents.api</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/documents.html#invenio-modules-documents-errors">invenio.modules.documents.errors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../modules/formatter.html">Formatter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../modules/jsonalchemy.html">JSONAlchemy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../modules/jsonalchemy.html#module-structure">Module Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/jsonalchemy.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/jsonalchemy.html#how-it-works">How it Works</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/jsonalchemy.html#how-to-extend-jsonalchemy-behaviour">How to Extend JSONAlchemy Behaviour</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/jsonalchemy.html#invenio-use-cases">Invenio Use Cases</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/jsonalchemy.html#api-documentation">API Documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../modules/knowledge.html">Knowledge</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../modules/knowledge.html#module-invenio.modules.knowledge.models">Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/knowledge.html#module-invenio.modules.knowledge.api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../modules/oauthclient.html">OAuthClient</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../modules/oauthclient.html#authorization-flow-overview">Authorization Flow Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/oauthclient.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/oauthclient.html#module-invenio.modules.oauthclient.config">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/oauthclient.html#contrib">Contrib</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/oauthclient.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../modules/redirector.html">Redirector</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../modules/redirector.html#module-invenio.modules.redirector.models">Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/redirector.html#module-invenio.modules.redirector.api">API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/redirector.html#module-invenio.modules.redirector.manage">Manage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../modules/upgrader.html">Upgrader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../modules/upgrader.html#recommendations-for-writing-upgrades">Recommendations for writing upgrades</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/upgrader.html#upgrade-modules">Upgrade modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/upgrader.html#upgrade-dependency-graph">Upgrade dependency graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/upgrader.html#module-invenio.modules.upgrader.models">Models</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../modules/uploader.html">Uploader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../modules/uploader.html#module-invenio.modules.uploader.tasks">Tasks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/uploader.html#module-invenio.modules.uploader.workflows">Workflows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../modules/workflows.html">Workflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../modules/workflows.html#create-a-workflow">Create a workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/workflows.html#create-a-task">Create a task</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/workflows.html#run-a-workflow">Run a workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/workflows.html#holding-pen">Holding Pen</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/workflows.html#api">API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/workflows.html#models">Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/workflows.html#engine">Engine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/workflows.html#id2">Workers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modules/workflows.html#views">Views</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#utilities">Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../utils/datastructures.html">Datastructures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/washers.html">Washers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../utils/forms.html">Forms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#legacy">Legacy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../legacy/bibrecord.html">BibRecord</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Community</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../community/code-of-conduct.html">Code of Conduct</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../deprecationpolicy.html">Deprecation policy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../deprecationpolicy.html#fast-track-deprecation">Fast track deprecation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deprecationpolicy.html#how-to-deprecate-a-feature">How to deprecate a feature</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../upgrading.html">Upgrading</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../upgrading.html#recommendations-for-writing-upgrades">Recommendations for writing upgrades</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrading.html#upgrade-modules">Upgrade modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrading.html#upgrade-dependency-graph">Upgrade dependency graph</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../license.html#authors">Authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../license.html#invenio-license">Invenio License</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Invenio</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Developer&#8217;s Guide</a> &raquo;</li>
      
    <li>Models</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="models">
<span id="developers-models"></span><h1>Models<a class="headerlink" href="#models" title="Permalink to this headline">Â¶</a></h1>
<p>Models define a Python-ic interface to relational databases using the
<a class="reference external" href="http://www.sqlalchemy.org/">SQLAlchemy</a> toolkit that <em>provides a full suite of well
known enterprise-level persistence patterns, designed for efficient and
high-performing database access, adapted into a simple and Pythonic domain
language</em> <a class="reference internal" href="#sqlalchemy2013" id="id1">[SQLAlchemy2013]</a>.</p>
<p>In order to add SQLAlchemy support to our application, the
<a class="reference external" href="http://pythonhosted.org/Flask-SQLAlchemy/">Flask-SQLAlchemy</a> extension is used.  It provides useful defaults as
well as extra declarative base helpers.  We recommend reading
<cite>Official Tutorial</cite> for a full introduction and <cite>Other Tutorial</cite> for
better understanding of ORM concepts.</p>
<div class="section" id="code-structure">
<h2>Code structure<a class="headerlink" href="#code-structure" title="Permalink to this headline">Â¶</a></h2>
<p>Our custom bridge contains several custom types and driver hacks for
smoother integration with multiple database engines. The code structure
follows:</p>
<div class="highlight-python"><div class="highlight"><pre>invenio/ext/sqlalchemy
    /engines
        mysql.py
    __init__.py
    expressions.py
    types.py
    utils.py
</pre></div>
</div>
<p>Before you start writing a new model please take a look at the
<a class="reference internal" href="../ext/sqlalchemy.html#invenio.ext.sqlalchemy.db" title="invenio.ext.sqlalchemy.db"><code class="xref py py-obj docutils literal"><span class="pre">db</span></code></a> object.  It will also make it easier to
understand the following example of a simple model written using SQLAlchemy:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># General imports.</span>
<span class="kn">from</span> <span class="nn">invenio.ext.sqlalchemy</span> <span class="kn">import</span> <span class="n">db</span>

<span class="c"># Create your models here.</span>


<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents a User record.&quot;&quot;&quot;</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">&#39;user&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="n">unsigned</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                   <span class="n">autoincrement</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
                      <span class="n">index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">_password</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">LargeBinary</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;password&quot;</span><span class="p">,</span>
                          <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">note</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">MutableDict</span><span class="o">.</span><span class="n">as_mutable</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">MarshalBinary</span><span class="p">(</span>
        <span class="n">default_value</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(),</span> <span class="n">force_type</span><span class="o">=</span><span class="nb">dict</span><span class="p">)),</span>
        <span class="n">nullable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">nickname</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">server_default</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
                         <span class="n">index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">last_login</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">DateTime</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>All your models used in a module have to be located in <code class="docutils literal"><span class="pre">models.py</span></code> inside
your module package (see <a class="reference internal" href="modules.html#developers-modules"><span>Modules</span></a> for developers).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you have any relations between tables use <code class="docutils literal"><span class="pre">ForeignKey</span></code>
definitions and <a class="reference external" href="http://docs.sqlalchemy.org/en/latest/orm/extensions/declarative.html#configuring-relationships">SQLAlchemy Relationships</a>.</p>
</div>
</div>
<div class="section" id="quering">
<h2>Quering<a class="headerlink" href="#quering" title="Permalink to this headline">Â¶</a></h2>
<p>Once you have written models it is possible to change the old way of writing
SQL queries:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">run_sql</span><span class="p">(</span><span class="s">&quot;SELECT user.nickname FROM user&quot;</span><span class="p">)</span>
<span class="go">[u.nickname for u in User.query.all()]</span>
<span class="go"># Old Invenio way ...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">nickname</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">nickname</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">User</span><span class="o">.</span><span class="n">nickname</span><span class="p">])</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="go"># All roads lead to Rome ... however some are slower.</span>
</pre></div>
</div>
<p>We also need a WHERE clause in our SQL statements. Let&#8217;s prepare a statement for
a list with all messages sent by a user:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">User</span><span class="o">.</span><span class="n">nickname</span><span class="p">,</span> <span class="n">MsgMESSAGE</span><span class="o">.</span><span class="n">subject</span><span class="p">])</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="go">[(&#39;admin&#39;, &#39;test1&#39;),</span>
<span class="go"> (&#39;admin&#39;, &#39;test2&#39;),</span>
<span class="go"> (&#39;jekyll&#39;, &#39;test1&#39;),</span>
<span class="go"> (&#39;jekyll&#39;, &#39;test2&#39;),</span>
<span class="go"> ...</span>
<span class="go"> (&#39;balthasar&#39;, &#39;test1&#39;),</span>
<span class="go"> (&#39;balthasar&#39;, &#39;test2&#39;)]</span>

<span class="go"># Something is missing in our query ...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">User</span><span class="o">.</span><span class="n">nickname</span><span class="p">,</span> <span class="n">MsgMESSAGE</span><span class="o">.</span><span class="n">subject</span><span class="p">],</span> <span class="n">User</span><span class="o">.</span><span class="n">id</span><span class="o">==</span><span class="n">MsgMESSAGE</span><span class="o">.</span><span class="n">id_user_from</span><span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
<span class="go">[(&#39;admin&#39;, &#39;test1&#39;),</span>
<span class="go"> (&#39;admin&#39;, &#39;test2&#39;)]</span>
<span class="go"># This is much better.</span>
</pre></div>
</div>
<p>Operators:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">&amp;</span></code>, <code class="docutils literal"><span class="pre">and_</span></code> (redefined because of Python operator priorites)</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">|</span></code>, <code class="docutils literal"><span class="pre">or_</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">~</span></code>, <code class="docutils literal"><span class="pre">not_</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">==</span></code>, <code class="docutils literal"><span class="pre">&lt;=</span></code>, <code class="docutils literal"><span class="pre">=&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;</span></code>, <code class="docutils literal"><span class="pre">&gt;</span></code></p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">func.like</span></code></p>
</li>
<li><p class="first">text operator <code class="docutils literal"><span class="pre">+</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">MsgMESSAGE</span><span class="o">.</span><span class="n">subject</span> <span class="o">+</span> <span class="s">&#39;: &#39;</span> <span class="o">+</span> <span class="n">MsgMESSAGE</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
<span class="go">&#39;&quot;msgMESSAGE&quot;.subject || :subject_1 || &quot;msgMESSAGE&quot;.body&#39;</span>
<span class="go"># :subject_1 will be replaced by &#39;: &#39; during query execution</span>
</pre></div>
</div>
</li>
</ul>
<p>Let&#8217;s use ORM for getting messages sent by &#8220;admin&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">admin</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">nickname</span><span class="o">.</span><span class="n">like</span><span class="p">(</span><span class="s">&#39;admin&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">admin</span>
<span class="go">admin &lt;root@localhost&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">admin</span><span class="o">.</span><span class="n">sent_messages</span>
<span class="go">[From: admin&lt;root@localhost&gt;, Subject: &lt;test1&gt; body1,</span>
<span class="go"> From: admin&lt;root@localhost&gt;, Subject: &lt;test2&gt; body2]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">nickname</span><span class="o">.</span><span class="n">like</span><span class="p">(</span><span class="s">&#39;%a%&#39;</span><span class="p">))</span>
<span class="go">[admin &lt;root@localhost&gt;,</span>
<span class="go"> dorian &lt;dorian.gray@cds.cern.ch&gt;,</span>
<span class="go"> balthasar &lt;balthasar.montague@cds.cern.ch&gt;</span>
</pre></div>
</div>
<p>Which brings us to another example where we create &#8216;&#8217;reusable&#8217;&#8217; queries
using <cite>db.bindparam</cite> instead of an actual filter value:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">nickname</span><span class="o">.</span><span class="n">like</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">bindparam</span><span class="p">(</span><span class="s">&#39;nickname&#39;</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">params</span><span class="p">({</span><span class="s">&#39;nickname&#39;</span><span class="p">:</span><span class="s">&#39;admin&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">one</span><span class="p">()</span>
<span class="go">admin &lt;root@localhost&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">params</span><span class="p">({</span><span class="s">&#39;nickname&#39;</span><span class="p">:</span><span class="s">&#39;%a%&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go">[admin &lt;root@localhost&gt;,</span>
<span class="go"> dorian &lt;dorian.gray@cds.cern.ch&gt;,</span>
<span class="go"> balthasar &lt;balthasar.montague@cds.cern.ch&gt;]</span>
</pre></div>
</div>
</div>
<div class="section" id="subqueries">
<h2>Subqueries<a class="headerlink" href="#subqueries" title="Permalink to this headline">Â¶</a></h2>
<p>Let&#8217;s start with simple example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">nickname</span><span class="o">.</span><span class="n">like</span><span class="p">(</span><span class="s">&quot;%a%&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">subquery</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MsgMESSAGE</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">MsgMESSAGE</span><span class="o">.</span><span class="n">id_user_from</span><span class="o">.</span><span class="n">in_</span><span class="p">(</span><span class="n">s</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>
</div>
<p>You can combine subqueries with the delete statement:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sub</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">UserMsgMESSAGE</span><span class="o">.</span><span class="n">id_user_to</span><span class="p">,</span> <span class="n">UserMsgMESSAGE</span><span class="o">.</span><span class="n">id_msgMESSAGE</span><span class="p">)</span><span class="o">.</span><span class="n">outerjoin</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">User</span><span class="o">.</span><span class="n">id</span><span class="o">==</span><span class="n">UserMsgMESSAGE</span><span class="o">.</span><span class="n">id_user_to</span><span class="p">)</span><span class="o">.</span><span class="n">outerjoin</span><span class="p">(</span><span class="n">MsgMESSAGE</span><span class="p">,</span> <span class="n">UserMsgMESSAGE</span><span class="o">.</span><span class="n">id_msgMESSAGE</span><span class="o">==</span><span class="n">MsgMESSAGE</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">or_</span><span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">id</span><span class="o">==</span><span class="bp">None</span><span class="p">,</span> <span class="n">MsgMESSAGE</span><span class="o">.</span><span class="n">id</span><span class="o">==</span><span class="bp">None</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="go"># Find links to not existing messages or users.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">UserMsgMESSAGE</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">tuple_</span><span class="p">(</span><span class="n">UserMsgMESSAGE</span><span class="o">.</span><span class="n">id_user_to</span><span class="p">,</span> <span class="n">UserMsgMESSAGE</span><span class="o">.</span><span class="n">id_msgMESSAGE</span><span class="p">)</span><span class="o">.</span><span class="n">in_</span><span class="p">(</span><span class="n">sub</span><span class="p">))</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">synchronize_session</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go"># Delete messages found in subquery.</span>
</pre></div>
</div>
</div>
<div class="section" id="schema">
<h2>Schema<a class="headerlink" href="#schema" title="Permalink to this headline">Â¶</a></h2>
<p>When you load all models, you want it to be easy to print create table
statements for these models:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">db</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">tables</span><span class="o">.</span><span class="n">values</span><span class="p">():</span> <span class="k">print</span> <span class="n">CreateTable</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">bind</span><span class="o">=</span><span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="p">)</span>
</pre></div>
</div>
<p>Similarly, we can print relevant create statements for indexes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">CreateIndex</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">bind</span><span class="o">=</span><span class="n">db</span><span class="o">.</span><span class="n">engine</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">table</span><span class="o">.</span><span class="n">indexes</span> <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">db</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">tables</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="s">&#39;indexes&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="section" id="improve-code-readability">
<h2>Improve code readability<a class="headerlink" href="#improve-code-readability" title="Permalink to this headline">Â¶</a></h2>
<p>Queries and filters can get quite long and some parts are unnecessarily
copied many times.</p>
<p>Some examples follow:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">reminder_status</span> <span class="o">=</span> <span class="n">CFG_WEBMESSAGE_STATUS_CODE</span><span class="p">[</span><span class="s">&#39;REMINDER&#39;</span><span class="p">]</span>

<span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">UserMsgMESSAGE</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">MsgMESSAGE</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">not_</span><span class="p">(</span><span class="n">AsBINARY</span><span class="p">(</span><span class="n">UserMsgMESSAGE</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">__eq__</span><span class="p">(</span><span class="n">reminder_status</span><span class="p">)))</span>  <span class="o">&amp;</span> <span class="p">(</span><span class="n">UserMsgMESSAGE</span><span class="o">.</span><span class="n">id_user_to</span> <span class="o">==</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

<span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">UserMsgMESSAGE</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
    <span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">MsgMESSAGE</span><span class="o">.</span><span class="n">id_user_from</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">UserMsgMESSAGE</span><span class="o">.</span><span class="n">id_msgMESSAGE</span> <span class="o">==</span> <span class="n">MsgMESSAGE</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">&amp;</span>
    <span class="n">db</span><span class="o">.</span><span class="n">not_</span><span class="p">(</span><span class="n">AsBINARY</span><span class="p">(</span><span class="n">UserMsgMESSAGE</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">__eq__</span><span class="p">(</span><span class="n">reminder_status</span><span class="p">)))</span>  <span class="o">&amp;</span> <span class="p">(</span><span class="n">UserMsgMESSAGE</span><span class="o">.</span><span class="n">id_user_to</span> <span class="o">==</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>

<span class="n">filter_all_message_from_user</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">uid</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="p">(</span><span class="n">User</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">MsgMESSAGE</span><span class="o">.</span><span class="n">id_user_from</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">UserMsgMESSAGE</span><span class="o">.</span><span class="n">id_msgMESSAGE</span> <span class="o">==</span> <span class="n">MsgMESSAGE</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">&amp;</span> <span class="n">db</span><span class="o">.</span><span class="n">not_</span><span class="p">(</span><span class="n">AsBINARY</span><span class="p">(</span><span class="n">UserMsgMESSAGE</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">__eq__</span><span class="p">(</span><span class="n">status</span><span class="p">)))</span>  <span class="o">&amp;</span> <span class="p">(</span><span class="n">UserMsgMESSAGE</span><span class="o">.</span><span class="n">id_user_to</span> <span class="o">==</span> <span class="n">uid</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils citation" frame="void" id="sqlalchemy2013" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[SQLAlchemy2013]</a></td><td>SQLAlchemy website: <a class="reference external" href="http://www.sqlalchemy.org/">http://www.sqlalchemy.org/</a></td></tr>
</tbody>
</table>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="modules.html" class="btn btn-neutral float-right" title="Modules" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="registries.html" class="btn btn-neutral" title="Pluggable Objects" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, 2014, 2015 CERN.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.2.0.dev20150608',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>